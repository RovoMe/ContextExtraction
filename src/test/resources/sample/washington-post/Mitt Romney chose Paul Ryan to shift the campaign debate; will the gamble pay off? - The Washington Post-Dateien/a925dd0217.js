(function($){TWP.Util=TWP.Util||{};TWP.Util.User=function(){var initialized=false;var isAuthenticated=false;var userName=null;var userId="";var userEmail="";var userCookie=null;var isFacebookUser=false;var userType="washington-post";var validCookies=["wapo_display"];var authCookies=["wapo_login_id"];var emailCookie=["at"];function parseCookieUserName(cookie,startStr){var start=-1,end=-1;start=cookie.indexOf(startStr)+startStr.length+1;end=userCookie.indexOf(";",start)==-1?userCookie.length:userCookie.indexOf(";",
start);return cookie.substring(start,end).split("|")[0]}function parseCookieEmail(){var i,x,y,ARRcookies=document.cookie.split(";");for(i=0;i<ARRcookies.length;i++){var x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("\x3d"));var y=ARRcookies[i].substr(ARRcookies[i].indexOf("\x3d")+1);var x=x.replace(/^\s+|\s+$/g,"");if(x=="at"){var string=unescape(y);var email=string.split("\x3d")[3];var isValidEmail=false;if(email){email=email.split("\x26")[0];if(email)var isValidEmail=validateEmail(email);else return isValidEmail}else return isValidEmail;
return email.length>0&&typeof email=="string"&&isValidEmail?email:false}}}function validateEmail(str){var atpos=str.indexOf("@");var dotpos=str.lastIndexOf(".");if(atpos<1||dotpos<atpos+2||dotpos+2>=str.length)return false;else return true}function setCustomCookie(){var upcUrl=document.location.href;if(upcUrl.indexOf("localhost")>-1){var c=$.cookie("TWPNIUCID");if(typeof c=="undefined"||c==null){var d=new Date;var i="TWPNI"+d.getTime()+"."+Math.round(Math.random()*1E4);d.setTime(d.getTime()+31104E6);
$.cookie("TWPNIUCID",i,{domain:TWP.Data.cookie_domain,expires:d,path:"/"})}}if(upcUrl.indexOf("beta")>-1){var c=$.cookie("x-split-override");if(c==null||typeof c=="undefined"){var d=new Date;d.setTime(d.getTime()+1E3*60*60*24*30);$.cookie("x-split-override","B",{domain:TWP.Data.cookie_domain,expires:d,path:"/"});$.cookie("X-WP-Split","B",{domain:TWP.Data.cookie_domain,expires:d,path:"/"})}}}function convertPersistentToSessionCookie(){var xsplitoverride=$.cookie("x-split-override");if(typeof xsplitoverride!=
"undefined"&&xsplitoverride!=null){$.cookie("x-split-override",null,{domain:TWP.Data.cookie_domain,path:"/"});$.cookie("x-split-override",xsplitoverride,{domain:TWP.Data.cookie_domain,path:"/"})}var xwpslit=$.cookie("X-WP-Split");if(typeof xwpslit!="undefined"&&xwpslit!=null){$.cookie("X-WP-Split",null,{domain:TWP.Data.cookie_domain,path:"/"});$.cookie("X-WP-Split",xwpslit,{domain:TWP.Data.cookie_domain,path:"/"})}}return{init:function(){var userCookieName="";for(var a=0;a<authCookies.length;a++)if(document.cookie.indexOf(authCookies[a])!=
-1){isAuthenticated=true;break}for(var a=0;a<validCookies.length;a++)if(document.cookie.indexOf(validCookies[a])!=-1){userCookie=document.cookie;userType=validCookies[a];break}if(isAuthenticated){switch(userType){case "fbuname":userCookieName=parseCookieUserName(userCookie,userType,8);break;default:userCookieName=parseCookieUserName(userCookie,userType,9);break}userCookieName=decodeURIComponent(userCookieName);userName=userCookieName.indexOf("@")!==-1?userCookieName.substring(0,userCookieName.indexOf("@")):
userCookieName;userName=userName.replace(/"/gi,"");userId=userCookieName;userEmail=parseCookieEmail()}setCustomCookie()},getUserCookie:function(){return userCookie.length>0&&typeof userCookie=="string"?userCookie:null},getUserType:function(){return userType.length>0&&typeof userType=="string"?userType:null},getUserId:function(){return userId},getUserName:function(){return typeof userName=="string"?userName:""},getUserEmail:function(){return userEmail.length<0||userEmail==false?null:userEmail},getAuthentication:function(){return isAuthenticated}}}();
TWP.Util.User.init()})(jQuery);
(function($){window.TWP=window.TWP||{};TWP.Identity=TWP.Identity||{};TWP.Identity.paywall=TWP.Identity.paywall||{};TWP.Identity.paywall.requireTracking=true;TWP.server=TWP.server||window.location.href.match(/^.*?:\/\/.*?\//)[0];var isSSL=window.location.protocol.indexOf("https")<0?false:true;var currDomain=TWP.Data&&TWP.Data.environment=="prod"||TWP.Data.environment=="stage"?".washingtonpost.com":".digitalink.com";var d=new Date;var expireTime=d.setHours(d.getHours()+24);var userCookie="wapo_login_id";
var wpatcCookie="WPATC";var actmgmtCookie="wapo_actmgmt";var gmeCookie="wapo_gme";var acqTestCookie="acq_test";var user=$.cookie(userCookie);var wpatc=$.cookie(wpatcCookie);var wapo_actmgmt=$.cookie(actmgmtCookie);var wapo_gme=$.cookie(gmeCookie);var isMobile=typeof mobile_browser!="undefined"&&mobile_browser===1?true:false;var tidValues={"main":"sub_s004","home":"s_001","digital":"s_002","gift":"s_003"};var overlays=new Array;overlays[0]={};overlays[1]={overlay:'\x3cdiv id\x3d"wp_Alert" class\x3d"simple-overlay" style\x3d"overflow: hidden;"\x3e\x3cdiv class\x3d"jqmClose close"\x3e\x3c/div\x3e\x3ciframe src height\x3d"306px" width\x3d"460px" scrolling\x3d"no" frameborder\x3d"0"\x3e\x3c/iframe\x3e\x3c/div\x3e',
overlayConfig:{overlay:100,overlayClass:"wp_alert",modal:false,closeClass:"close",toTop:true,trigger:".close",onShow:function(h){h.w.prependTo(h.o);h.o.prependTo("body");h.w.fadeIn()},onHide:function(h){if(!!window.s&&typeof s.sendDataToOmniture=="function"){var closeVars={"eVar1":s.eVar1,"eVar2":s.eVar2,"eVar6":s.eVar6,"eVar7":"","eVar17":s.eVar17,"eVar60":s.eVar60,"eVar62":s.eVar62,"eVar64":s.eVar64,"eVar65":s.eVar65,"eVar66":s.eVar66};try{s.sendDataToOmniture("close alert","event67",closeVars)}catch(e){}}h.w.fadeOut("500",
function(){h.o.remove()})}}};overlays[2]={overlay:'\x3cdiv id\x3d"wp_Signin" class\x3d"simple-overlay" style\x3d"overflow: hidden;"\x3e\x3cdiv class\x3d"jqmClose close"\x3e\x3c/div\x3e\x3ciframe src height\x3d"100%" width\x3d"100%" scrolling\x3d"no" frameborder\x3d"0"\x3e\x3c/iframe\x3e\x3c/div\x3e',overlayConfig:{overlay:100,overlayClass:"wp_signin",modal:false,closeClass:"close",toTop:true,trigger:".close",onShow:function(h){h.w.prependTo(h.o);h.o.prependTo("body");h.w.fadeIn()},onHide:function(h){if($(arguments[0].target).is(".close"))window.location.href=
"/";$("body").css("overflow-y","");$(document).unbind("touchmove mousewheel mousemove scroll",_scrollHandler);if(!!window.s&&typeof s.sendDataToOmniture=="function"){var closeVars={"eVar1":s.pageName,"eVar2":s.channel,"eVar5":s.prop3};try{s.sendDataToOmniture("close overlay","event69",closeVars)}catch(e){}}}}};overlays[3]={overlay:'\x3cdiv id\x3d"wp_Signin" class\x3d"simple-overlay" style\x3d"overflow: hidden;"\x3e\x3cdiv class\x3d"jqmClose close"\x3e\x3c/div\x3e\x3ciframe src height\x3d"100%" width\x3d"100%" scrolling\x3d"no" frameborder\x3d"0"\x3e\x3c/iframe\x3e\x3c/div\x3e',
overlayConfig:{overlay:100,overlayClass:"wp_signin",modal:false,closeClass:"close",toTop:true,trigger:".close",onShow:function(h){h.w.prependTo(h.o);h.o.prependTo("body");h.w.fadeIn()},onHide:function(h){if($(arguments[0].target).is(".close"))window.location.href="/";$("body").css("overflow-y","");$(document).unbind("touchmove mousewheel mousemove scroll",_scrollHandler);if(!!window.s&&typeof s.sendDataToOmniture=="function"){var closeVars={"eVar1":s.pageName,"eVar2":s.channel,"eVar5":s.prop3};try{s.sendDataToOmniture("close overlay",
"event63",closeVars)}catch(e){}}}}};overlays[4]={overlay:'\x3cdiv id\x3d"wp_Signin" class\x3d"simple-overlay" style\x3d"overflow: hidden;"\x3e\x3cdiv class\x3d"jqmClose close"\x3e\x3c/div\x3e\x3ciframe src height\x3d"100%" width\x3d"100%" scrolling\x3d"no" frameborder\x3d"0"\x3e\x3c/iframe\x3e\x3c/div\x3e',overlayConfig:{overlay:100,overlayClass:"wp_signin",modal:false,closeClass:"close",toTop:true,trigger:".close",onShow:function(h){h.w.prependTo(h.o);h.o.prependTo("body");h.w.fadeIn()},onHide:function(h){if($(arguments[0].target).is(".close"))window.location.href=
"/";$("body").css("overflow-y","");$(document).unbind("touchmove mousewheel mousemove scroll",_scrollHandler);if(!!window.s&&typeof s.sendDataToOmniture=="function"){var closeVars={"eVar1":s.pageName,"eVar2":s.channel,"eVar5":s.prop3,"eVar63":"one-time overlay"};try{s.sendDataToOmniture("close overlay","event69",closeVars)}catch(e){}}}}};overlays["mobile"]={overlay:'\x3cdiv id\x3d"wp_Alert" class\x3d"simple-overlay" style\x3d"overflow: hidden;"\x3e\x3cdiv class\x3d"jqmClose close"\x3e\x3c/div\x3e\x3ciframe src height\x3d"100%" width\x3d"100%" scrolling\x3d"no" frameborder\x3d"0"\x3e\x3c/iframe\x3e\x3c/div\x3e',
overlayConfig:{overlay:100,overlayClass:"wp_alert",modal:false,closeClass:"close",toTop:true,trigger:".close",onShow:function(h){h.w.prependTo(h.o);h.o.prependTo("body");h.w.fadeIn()},onHide:function(h){if($(arguments[0].target).is(".close"))window.location.href="/";$("body").css("overflow-y","");$(document).unbind("touchmove mousewheel mousemove scroll",_scrollHandler);if(!!window.s&&typeof s.sendDataToOmniture=="function"){var closeVars={"eVar1":s.eVar1,"eVar2":s.eVar2,"eVar6":s.eVar6,"eVar7":"",
"eVar17":s.eVar17,"eVar60":s.eVar60,"eVar62":s.eVar62,"eVar64":s.eVar64,"eVar65":s.eVar65,"eVar66":s.eVar66};try{s.sendDataToOmniture("close alert","event67",closeVars)}catch(e){}}h.w.fadeOut("500",function(){h.o.remove()})}}};TWP.Identity.omniture={sub:{"-1":"N/A",0:"Unsubscribed",1:"Subscribed"},mtr:{"-1":"Unmetered",1:"Metered",20:"Unmetered: content_type",21:"Unmetered: referer",22:"Unmetered: domain"},tracking:{"wp_evar60":"not available","wp_evar64":"not available","wp_evar65":"not available",
"wp_evar66":"not available"}};TWP.isSignedIn=function(){var cookies=document.cookie;idx=cookies.indexOf("wapo_login_id");if(idx>-1)return true;else return false};TWP.Identity.setAuthenticationLink=function(data){if(typeof data=="object")$.extend(TWP.Identity.paywall.pwresp,data.pwresp);var wrapperElm=$("#utility-wrapper");if(wrapperElm.length<=0)return;var userName="";var provider="";var currentURL=window.location.href.split("?")[0];if(TWP.server.match(/digitalink\.com|washingtonpost\.com|wpprivate\.com/ig)==
null)return;TWP.Identity.isSignedIn=TWP.Util.User.getAuthentication();if(TWP.Identity.isSignedIn){userName=TWP.Util.User.getUserName();provider=typeof TWP.signedInProvider=="function"?TWP.signedInProvider():"Washington Post";provider=typeof provider!="undefined"?provider.toLowerCase():""}var freeAccessLink=TWP.Identity.paywall.pwresp.fr===1?'\x3cli class\x3d"no-right"\x3e'+'\x3ca href\x3d"'+TWP.signin.free_access+'"\x3eGET FREE ACCESS\x3c/a\x3e'+"\x3c/li\x3e":"";var signinLinks={"pw":{"anon":'\x3cli id\x3d"global-signin"style\x3d"min-width:32px;"\x3e'+
'\x3ca href\x3d"'+TWP.signin.loginurl_page+currentURL+'"\x3eSign In\x3c/a\x3e'+"\x3c/li\x3e"+'\x3cli class\x3d"no-right"\x3e\x3ca href\x3d"'+TWP.signin.profileurl+currentURL+'\x26refresh\x3dtrue"\x3eMy Account \x3c/a\x3e\x3c/li\x3e'+freeAccessLink+'\x3cul class\x3d"subscribe-links left"\x3e'+'\x3cli class\x3d"no-right subscribe"\x3e\x3ca href\x3d"'+TWP.signin.subscribe+"?tid\x3d"+tidValues.main+'\x26promo\x3ddigital04_header_default\x26oscode\x3dRPWH\x26wpsrc\x3dCM0000447\x26show4\x3dtrue"\x3eSUBSCRIBE: \x3c/a\x3e\x3c/li\x3e'+
'\x3cli \x3e\x3ca href\x3d"'+TWP.signin.print_offer+"tid\x3d"+tidValues.home+'\x26promo\x3ddigital06_header_homedelivery\x26oscode\x3dRPWH\x26wpsrc\x3dCM0000450"\x3eHome Delivery\x3c/a\x3e\x3c/li\x3e'+'\x3cli class\x3d"no-right"\x3e\x3ca href\x3d"'+TWP.signin.digital_offer+"tid\x3d"+tidValues.digital+'\x26promo\x3ddigital04_header_default\x26oscode\x3dRPWH\x26wpsrc\x3dCM0000447"\x3eDigital\x3c/a\x3e\x3c/li\x3e'+"\x3c/ul\x3e",0:"\x3cli\x3e"+(provider.indexOf("facebook")>=0?'\x3ca class\x3d"icon share facebook" ':
"\x3ca ")+' href\x3d"'+TWP.signin.profileurl+currentURL+'\x26refresh\x3dtrue"\x3e Hi, '+userName+"!\x3c/a\x3e"+"\x3c/li\x3e"+'\x3cli\x3e\x3ca href\x3d"'+TWP.signin.profileurl+currentURL+'\x26refresh\x3dtrue"\x3eMy Account \x3c/a\x3e\x3c/li\x3e'+'\x3cli class\x3d"no-right"\x3e\x3ca href\x3d"'+TWP.signin.logouturl_page+'"\x3eSign Out\x3c/a\x3e\x3c/li\x3e'+freeAccessLink+'\x3cul class\x3d"subscribe-links left"\x3e'+'\x3cli class\x3d"no-right subscribe"\x3e\x3ca href\x3d"'+TWP.signin.subscribe+"?tid\x3d"+
tidValues.main+'\x26promo\x3ddigital04_header_default\x26oscode\x3dRPWH\x26wpsrc\x3dCM0000447\x26show4\x3dtrue"\x3eSUBSCRIBE: \x3c/a\x3e\x3c/li\x3e'+'\x3cli \x3e\x3ca href\x3d"'+TWP.signin.print_offer+"tid\x3d"+tidValues.home+'\x26promo\x3ddigital06_header_homedelivery\x26oscode\x3dRPWH\x26wpsrc\x3dCM0000450"\x3eHome Delivery\x3c/a\x3e\x3c/li\x3e'+'\x3cli class\x3d"no-right"\x3e\x3ca href\x3d"'+TWP.signin.digital_offer+"tid\x3d"+tidValues.digital+'\x26promo\x3ddigital04_header_default\x26oscode\x3dRPWH\x26wpsrc\x3dCM0000447"\x3eDigital\x3c/a\x3e\x3c/li\x3e'+
"\x3c/ul\x3e",1:"\x3cli\x3e"+(provider.indexOf("facebook")>=0?'\x3ca class\x3d"icon share facebook" ':"\x3ca ")+' href\x3d"'+TWP.signin.profileurl+currentURL+'\x26refresh\x3dtrue"\x3eHi, '+userName+"!\x3c/a\x3e"+"\x3c/li\x3e"+'\x3cli\x3e\x3ca href\x3d"'+TWP.signin.profileurl+currentURL+'\x26refresh\x3dtrue"\x3eMy Account \x3c/a\x3e\x3c/li\x3e'+'\x3cli class\x3d"no-right"\x3e\x3ca href\x3d"'+TWP.signin.logouturl_page+'"\x3eSign Out\x3c/a\x3e\x3c/li\x3e'+'\x3cul class\x3d"subscribe-links left"\x3e'+
"\x3c/ul\x3e"},"np":{"anon":'\x3cli id\x3d"global-signin" style\x3d"min-width:32px;"\x3e'+'\x3ca href\x3d"'+TWP.signin.loginurl_page+currentURL+'"\x3eSign In\x3c/a\x3e'+"\x3c/li\x3e"+'\x3cli\x3e\x3ca href\x3d"'+TWP.signin.profileurl+currentURL+'\x26refresh\x3dtrue"\x3eMy Account \x3c/a\x3e\x3c/li\x3e'+'\x3cli id\x3d"global-registration" class\x3d"no-right" style\x3d"margin-right:25px;"\x3e'+'\x3ca href\x3d"'+TWP.signin.registrationurl_page+currentURL+'"\x3eRegister\x3c/a\x3e'+"\x3c/li\x3e","signedin":'\x3cli id\x3d"global-signin" style\x3d"min-width:32px;"\x3e'+
(provider.indexOf("facebook")>=0?'\x3ca class\x3d"icon share facebook" ':"\x3cspan\x3eHello \x3c/span\x3e\x3ca ")+' href\x3d"'+TWP.signin.profileurl+currentURL+'\x26refresh\x3dtrue"\x3e'+userName+"\x3c/a\x3e"+"\x3c/li\x3e"+'\x3cli\x3e\x3ca href\x3d"'+TWP.signin.profileurl+currentURL+'\x26refresh\x3dtrue"\x3eMy Account \x3c/a\x3e\x3c/li\x3e'+'\x3cli  id\x3d"global-registration" class\x3d"no-right" style\x3d"margin-right:25px;"\x3e\x3ca href\x3d"'+TWP.signin.logouturl_page+'"\x3eSign Out\x3c/a\x3e\x3c/li\x3e'}};
var linkString="";if(TWP.Identity.paywall.pwresp.sub<0)if(TWP.Identity.isSignedIn)linkString=signinLinks.np.signedin;else linkString=signinLinks.np.anon;else if(TWP.Identity.isSignedIn)linkString=signinLinks.pw[TWP.Identity.paywall.pwresp.sub];else linkString=signinLinks.pw.anon;wrapperElm.find("ul#utility-links.inline-list.left").remove();wrapperElm.prepend('\x3cul id\x3d"utility-links" class\x3d"inline-list left"\x3e'+linkString+"\x3c/ul\x3e")};TWP.Identity.setHandlers=function(){try{$(window.document).on("onTwpLoginComplete",
function(event,data){typeof TWP_Debug!="undefined"&&TWP_Debug.pagedebug&&window.console&&console.log&&console.log(event.type+"fired!");event.stopPropagation();TWP.Util.User.init();TWP.Identity.setAuthenticationLink(data);try{$("body").css("overflow-y","");$("#wp_Signin.simple-overlay").overlay().close()}catch(e){}})}catch(e){}try{$(window.document).on("onTwpMeterReady",function(event,data){if(TWP.Identity.paywall.pwresp.action===0&&TWP.Identity.paywall.pwresp.fr===1&&wapo_gme!=="1"){$.cookie(gmeCookie,
"1",{domain:currDomain,expires:new Date(expireTime),path:"/"});_openOverlay(event,{pwresp:{action:4,url:TWP.signin.free_access_overlay}})}})}catch(e){}try{$(window.document).on("onTwpWarningFreeAccess",function(event,data){_openOverlay(event,data)})}catch(e){}try{$(window.document).on("onTwpMastheadComplete",function(event,data){event.stopPropagation();TWP.Identity.setAuthenticationLink()})}catch(e){}try{$(window.document).on("onTwpLoginInit",function(event,data){_openOverlay(event,data)})}catch(e){}};
TWP.Identity.auth=function(identityData){var origUrl,origReferrer=document.referrer;if(typeof identityData!="undefined"){origUrl=identityData.url;origReferrer=identityData.referrer}else{origUrl=window.originalWashingtonPostURl&&window.originalWashingtonPostURl.substring(window.originalWashingtonPostURl.indexOf(".com/")+4)||location.pathname;origUrl=origUrl+location.search}try{$.ajax({type:"GET",url:TWP.signin.auth_api_url+encodeURI(origUrl+(origUrl.indexOf("?")>=0?"\x26":"?")+"rplapisplit\x3d1\x26referrer\x3d"+
origReferrer),dataType:"jsonp",timeout:2E3,cache:"false"}).always(function(data,status){typeof TWP_Debug!="undefined"&&TWP_Debug.pagedebug&&window.console&&console.log&&console.log("RegWall action: "+data.pwresp.action+"\nRegWall - url: "+data.pwresp.url+"\n");typeof TWP_Debug!="undefined"&&TWP_Debug.pagedebug&&window.console&&console.log&&console.log(data);window.console&&console.log&&console.log("PAYWALL CHECK STATUS: "+status);window.console&&console.log&&console.log("PWAPI URL: "+TWP.signin.auth_api_url+
encodeURI(origUrl+(origUrl.indexOf("?")>=0?"\x26":"?")+"rplapisplit\x3d1\x26referrer\x3d"+origReferrer));if(status=="success"&&data&&data.pwresp){window.console&&console.log&&console.log("PAYWALL ACTION: "+data.pwresp.action);window.console&&console.log&&console.log("PAYWALL URL: "+data.pwresp.url);window.console&&console.log&&console.log("PAYWALL SUB: "+TWP.Identity.omniture.sub[data.pwresp.sub]);window.console&&console.log&&console.log("PAYWALL METERED: "+TWP.Identity.omniture.mtr[data.pwresp.mtr]);
window.console&&console.log&&console.log("PAYWALL METER COUNT: "+data.pwresp.mtrct);window.console&&console.log&&console.log("PAYWALL MODE: "+data.pwresp.mtfn);$.extend(TWP.Identity.paywall,eval(data));TWP.Identity.setAuthenticationLink();var tmpVal=_getKey(($.cookie(actmgmtCookie)||"").toLowerCase(),"partner");TWP.Identity.omniture.tracking.wp_evar60=tmpVal===null?"none":tmpVal;TWP.Identity.omniture.tracking.wp_evar64=data.pwresp.sub==1?TWP.Identity.omniture.sub[data.pwresp.sub]:data.pwresp.action>
1?"overlay":data.pwresp.mtrct;tmpVal=_getKey($.cookie(actmgmtCookie)||"","omniture");TWP.Identity.omniture.tracking.wp_evar65=tmpVal===null?"none":tmpVal;TWP.Identity.omniture.tracking.wp_evar66=data.pwresp.mtr;for(var trackingVar in TWP.Identity.omniture.tracking)window[trackingVar]=TWP.Identity.omniture.tracking[trackingVar];_openOverlay(null,data);$(window.document).trigger("onTwpMeterReady")}$(window.document).trigger("onTwpMeterComplete")})}catch(err){$(window.document).trigger("onTwpMeterComplete")}};
TWP.Identity.init=function(){if(!TWP.Identity.initComplete&&window.top==window.self){TWP.Identity.setHandlers();_signInInit();$(document).ready(function(){TWP.Identity.auth();TWP.Identity.initComplete=true})}};var _scrollHandler=function(event){event.stopPropagation();return false};var _getKey=function(cookieString,cookieKeyValue,valueDelimiter,keyDelimiter){valueDelimiter=typeof valueDelimiter=="undefined"||!valueDelimiter?"|":valueDelimiter;keyDelimiter=typeof keyDelimiter=="undefined"||!keyDelimiter?
":":keyDelimiter;var returnValue=null;if(cookieString==null||typeof cookieString=="undefined"||cookieString.indexOf(valueDelimiter)<0)return returnValue;var tmpArry=cookieString.split(valueDelimiter);$.each(tmpArry||[],function(key,value){if(value.indexOf(cookieKeyValue)>=0)if(value.indexOf(keyDelimiter)>=0)returnValue=value.split(keyDelimiter)[1]});return returnValue};var _signInInit=function(){try{if(!user||user.length==0||user==null);else if(user&&(!wpatc||wpatc.length==0)||user&&wpatc&&!wpatc.match(/\:K\=\d+/)){var url=
TWP.signin.api_url+"?username\x3d"+user;var thisDate=new Date;$.ajax({type:"GET",url:url,dataType:"jsonp",timeout:2E3,cache:"false",success:function(data){if(data.K);}})}}catch(e){}};var _openOverlay=function(event,data){typeof TWP_Debug!="undefined"&&TWP_Debug.pagedebug&&window.console&&console.log&&console.log(event.type+"fired!");try{event&&event.stopPropagation()}catch(e){}if(data.pwresp.action===0)return;try{var obj=$.extend({},TWP.Identity.paywall.pwresp,data.pwresp);var params="";$.each(obj,
function(i,v){if(i!="url")params=params+"\x26"+i+"\x3d"+v});var url=data.pwresp.url+(data.pwresp.url.indexOf("?")>=0?"\x26":"?")+encodeURI("page\x3d"+(!!window.s&&s.eVar1)+"\x26section\x3d"+(!!window.s&&s.eVar2)+"\x26prev\x3d"+(!!window.s&&s.eVar6)+"\x26geo\x3d"+(!!window.s&&s.eVar7)+"\x26ctype\x3d"+(!!window.s&&s.eVar17)+"\x26signedin\x3d"+(!!window.s&&s.eVar62)+"\x26mcount\x3d"+(data.pwresp.mtrct||TWP.Identity.paywall.pwresp&&TWP.Identity.paywall.pwresp.mtrct)+"\x26sub\x3d"+(data.pwresp.sub||TWP.Identity.paywall.pwresp&&
TWP.Identity.paywall.pwresp.sub)+"\x26ismetered\x3d"+(data.pwresp.mtr||TWP.Identity.paywall.pwresp&&TWP.Identity.paywall.pwresp.mtr)+params);window.console&&console.log&&console.log("PAYWALL OVERLAY/REDIRECT URL: "+url);if(data.pwresp.action>=3&&_isOverlayDisplayed(data)===false){window.location.href=url+"\x26acq_test\x3d1";return}if(typeof overlays[data.pwresp.action].overlay!=="undefined"&&data.pwresp.action>0){typeof TWP_Debug!="undefined"&&TWP_Debug.pagedebug&&window.console&&console.log&&console.log("Regwall: preparing to display overlay");
typeof TWP_Debug!="undefined"&&TWP_Debug.pagedebug&&window.console&&console.log&&console.log(TWP.Identity.paywall);var thisAction=data.pwresp.action;if(isMobile&&thisAction===1)thisAction="mobile";var $overlay=$(overlays[thisAction].overlay);$("body").css("overflow-y",overlays[thisAction].overflowCss);if(thisAction>1)$(document).on("touchmove mousewheel mousemove scroll",_scrollHandler);$overlay.jqm(overlays[thisAction].overlayConfig);$overlay.find("iframe").attr("src",url);$overlay.jqmShow()}}catch(e){}};
var _isOverlayDisplayed=function(data){var displayOverlay=false;if(window.wp_pb&&wp_pb.BrowserInfo&&wp_pb.BrowserInfo.browser=="Explorer"&&wp_pb.BrowserInfo.version<=9||$.browser&&$.browser.msie&&$.browser.version<=9)displayOverlay=false;return displayOverlay};TWP.Identity.init()})(jQuery);