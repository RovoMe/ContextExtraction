/* Source and licensing information for the line(s) below can be found at http://www.independent.co.uk/misc/jquery.once.js. */
(function($){var cache={},uuid=0;$.fn.once=function(id,fn){if(typeof id!='string'){if(!(id in cache))cache[id]=++uuid;if(!fn)fn=id;id='jquery-once-'+cache[id]};var name=id+'-processed',elements=this.not('.'+name).addClass(name);return $.isFunction(fn)?elements.each(fn):elements};$.fn.removeOnce=function(id,fn){var name=id+'-processed',elements=this.filter('.'+name).removeClass(name);return $.isFunction(fn)?elements.each(fn):elements}})(jQuery);;
/* Source and licensing information for the above line(s) can be found at http://www.independent.co.uk/misc/jquery.once.js. */
/* Source and licensing information for the line(s) below can be found at http://www.independent.co.uk/misc/drupal.js. */
var Drupal=Drupal||{settings:{},behaviors:{},locale:{}};jQuery.noConflict();(function($){var jquery_init=$.fn.init;$.fn.init=function(selector,context,rootjQuery){if(selector&&typeof selector==='string'){var hash_position=selector.indexOf('#');if(hash_position>=0){var bracket_position=selector.indexOf('<');if(bracket_position>hash_position)throw'Syntax error, unrecognized expression: '+selector}};return jquery_init.call(this,selector,context,rootjQuery)};$.fn.init.prototype=jquery_init.prototype;Drupal.attachBehaviors=function(context,settings){context=context||document;settings=settings||Drupal.settings;$.each(Drupal.behaviors,function(){if($.isFunction(this.attach))this.attach(context,settings)})};Drupal.detachBehaviors=function(context,settings,trigger){context=context||document;settings=settings||Drupal.settings;trigger=trigger||'unload';$.each(Drupal.behaviors,function(){if($.isFunction(this.detach))this.detach(context,settings,trigger)})};Drupal.checkPlain=function(str){var character,regex,replace={'&':'&amp;','"':'&quot;','<':'&lt;','>':'&gt;'};str=String(str);for(character in replace)if(replace.hasOwnProperty(character)){regex=new RegExp(character,'g');str=str.replace(regex,replace[character])};return str};Drupal.formatString=function(str,args){for(var key in args){switch(key.charAt(0)){case'@':args[key]=Drupal.checkPlain(args[key]);break;case'!':break;case'%':default:args[key]=Drupal.theme('placeholder',args[key]);break};str=str.replace(key,args[key])};return str};Drupal.t=function(str,args,options){options=options||{};options.context=options.context||'';if(Drupal.locale.strings&&Drupal.locale.strings[options.context]&&Drupal.locale.strings[options.context][str])str=Drupal.locale.strings[options.context][str];if(args)str=Drupal.formatString(str,args);return str};Drupal.formatPlural=function(count,singular,plural,args,options){var args=args||{};args['@count']=count;var index=Drupal.locale.pluralFormula?Drupal.locale.pluralFormula(args['@count']):((args['@count']==1)?0:1);if(index==0){return Drupal.t(singular,args,options)}else if(index==1){return Drupal.t(plural,args,options)}else{args['@count['+index+']']=args['@count'];delete args['@count'];return Drupal.t(plural.replace('@count','@count['+index+']'),args,options)}};Drupal.absoluteUrl=function(url){var urlParsingNode=document.createElement('a');try{url=decodeURIComponent(url)}catch(e){};urlParsingNode.setAttribute('href',url);return urlParsingNode.cloneNode(false).href};Drupal.urlIsLocal=function(url){var absoluteUrl=Drupal.absoluteUrl(url),protocol=location.protocol;if(protocol==='http:'&&absoluteUrl.indexOf('https:')===0)protocol='https:';var baseUrl=protocol+'//'+location.host+Drupal.settings.basePath.slice(0,-1);try{absoluteUrl=decodeURIComponent(absoluteUrl)}catch(e){};try{baseUrl=decodeURIComponent(baseUrl)}catch(e){};return absoluteUrl===baseUrl||absoluteUrl.indexOf(baseUrl+'/')===0};Drupal.theme=function(func){var args=Array.prototype.slice.apply(arguments,[1]);return(Drupal.theme[func]||Drupal.theme.prototype[func]).apply(this,args)};Drupal.freezeHeight=function(){Drupal.unfreezeHeight();$('<div id="freeze-height"></div>').css({position:'absolute',top:'0px',left:'0px',width:'1px',height:$('body').css('height')}).appendTo('body')};Drupal.unfreezeHeight=function(){$('#freeze-height').remove()};Drupal.encodePath=function(item,uri){uri=uri||location.href;return encodeURIComponent(item).replace(/%2F/g,'/')};Drupal.getSelection=function(element){if(typeof element.selectionStart!='number'&&document.selection){var range1=document.selection.createRange(),range2=range1.duplicate();range2.moveToElementText(element);range2.setEndPoint('EndToEnd',range1);var start=range2.text.length-range1.text.length,end=start+range1.text.length;return{start:start,end:end}};return{start:element.selectionStart,end:element.selectionEnd}};Drupal.ajaxError=function(xmlhttp,uri,customMessage){var statusCode,statusText,pathText,responseText,readyStateText,message;if(xmlhttp.status){statusCode="\n"+Drupal.t("An AJAX HTTP error occurred.")+"\n"+Drupal.t("HTTP Result Code: !status",{'!status':xmlhttp.status})}else statusCode="\n"+Drupal.t("An AJAX HTTP request terminated abnormally.");statusCode+="\n"+Drupal.t("Debugging information follows.");pathText="\n"+Drupal.t("Path: !uri",{'!uri':uri});statusText='';try{statusText="\n"+Drupal.t("StatusText: !statusText",{'!statusText':$.trim(xmlhttp.statusText)})}catch(e){};responseText='';try{responseText="\n"+Drupal.t("ResponseText: !responseText",{'!responseText':$.trim(xmlhttp.responseText)})}catch(e){};responseText=responseText.replace(/<("[^"]*"|'[^']*'|[^'">])*>/gi,"");responseText=responseText.replace(/[\n]+\s+/g,"\n");readyStateText=xmlhttp.status==0?("\n"+Drupal.t("ReadyState: !readyState",{'!readyState':xmlhttp.readyState})):"";customMessage=customMessage?("\n"+Drupal.t("CustomMessage: !customMessage",{'!customMessage':customMessage})):"";message=statusCode+pathText+statusText+customMessage+responseText+readyStateText;return message};$('html').addClass('js');document.cookie='has_js=1; path=/';$(function(){if(jQuery.support.positionFixed===undefined){var el=$('<div style="position:fixed; top:10px" />').appendTo(document.body);jQuery.support.positionFixed=el[0].offsetTop===10;el.remove()}});$(function(){Drupal.attachBehaviors(document,Drupal.settings)});Drupal.theme.prototype={placeholder:function(str){return'<em class="placeholder">'+Drupal.checkPlain(str)+'</em>'}}})(jQuery);;
/* Source and licensing information for the above line(s) can be found at http://www.independent.co.uk/misc/drupal.js. */
/* Source and licensing information for the line(s) below can be found at http://www.independent.co.uk/sites/all/themes/ines_themes/ines_theme/js/main.js. */
function throttle(a,b,c){b||(b=250);var d,e;return function(){var f=c||this,g=+new Date(),h=arguments;d&&d+b>g?(clearTimeout(e),e=setTimeout(function(){d=g,a.apply(f,h)},b)):(d=g,a.apply(f,h))}}
function abbrNum(a,b){b=Math.pow(10,b);for(var c=["K","M","B","T"],d=c.length-1;d>=0;d--){var e=Math.pow(10,3*(d+1));if(a>=e){a=Math.round(a*b/e)/b,1e3==a&&d<c.length-1&&(a=1,d++),a+=c[d];break}};return a}
function createCookie(a,b,c){var d;if(c){var e=new Date();e.setTime(e.getTime()+24*c*60*60*1e3),d="; expires="+e.toGMTString()}else d="";document.cookie=encodeURIComponent(a)+"="+encodeURIComponent(b)+d+"; path=/"}
function getCookie(a){for(var b=a+"=",c=document.cookie.split(";"),d=0;d<c.length;d++){for(var e=c[d];" "==e.charAt(0);)e=e.substring(1);if(0==e.indexOf(b))return e.substring(b.length,e.length)};return""}
function detectDirection(){return st=window.pageYOffset,direction=st>lastScrollTop?"down":"up",lastScrollTop=st,direction};var cache={supports:{}};cache.supports.localstorage=function(){var a="test";try{return localStorage.setItem(a,a),localStorage.removeItem(a),!0}catch(b){return!1}}(),jQuery(document).ready(function(a){a("body.search-results .pager .text-link").on("click",function(b){b.preventDefault(),a('#content input[type="search"]').focus()})}),function(a,b,c,d){b.behaviors.grid={wrapped_by_ads:!1,throttled_recalculate:throttle(function(){b.behaviors.grid.recalculate()},250),attach:function(){var d=c.location.href;a("body.section").length>0&&!(d.indexOf("taxonomy/term")>-1&&d.indexOf("/layout")>-1)&&(b.behaviors.grid.get_grid_from_dom(),b.behaviors.grid.recalculate(),c.addEventListener?c.addEventListener("resize",b.behaviors.grid.throttled_recalculate,!1):c.attachEvent("resize",b.behaviors.grid.throttled_recalculate))},update_breakpoints:function(){var a=d.documentElement.clientWidth;if("undefined"!=typeof d.getElementsByTagName("body")[0])var c=d.getElementsByTagName("body")[0].className.indexOf("wrapped_by_ads")>=0;"undefined"!=typeof c&&(a>=1240&&!c?b.behaviors.grid.weight_per_row=4:a>=930?b.behaviors.grid.weight_per_row=3:a>=620?b.behaviors.grid.weight_per_row=2:b.behaviors.grid.weight_per_row=1)},get_grid_from_dom:function(){b.behaviors.grid.rows=[];var a,c=d.querySelectorAll(".row");for(r=0,s=c.length;r<s;r++)for(b.behaviors.grid.rows.push([]),a=c[r].querySelectorAll("article"),m=0,n=a.length;m<n;m++)b.behaviors.grid.rows[r].push([]),b.behaviors.grid.rows[r][m]={dom:a[m],original_weight:parseInt(a[m].getAttribute("data-weight"))||1,locked:"true"===a[m].getAttribute("data-locked")}},recalculate:function(){for(b.behaviors.grid.update_breakpoints(),r=0,s=b.behaviors.grid.rows.length;r<s;r++)b.behaviors.grid.fit_row(b.behaviors.grid.rows[r])},get_row_weights:function(a,b){for(var c=[],d=0,e=a.length;e>d;d++)"original"===b?c.push(a[d].original_weight):c.push(a[d].calculated_weight);return c},grow_weights:function(a){for(var c=b.behaviors.grid.get_row_weights(a,"original"),d=Math.max.apply(Math,c),e=0,f=a.length;f>e;e++)if(a[e].original_weight===d&&!a[e].locked){c[e]++;break};return c},apply_weights_to_row:function(a,c){for(var e,f=0,g=a.length;g>f;f++)e=a[f],"original"===c?e.calculated_weight=e.original_weight:e.calculated_weight=c[f],e.dom.className="weight-"+(e.calculated_weight||e.original_weight);d.getElementById("content").className="weight_per_row_"+b.behaviors.grid.weight_per_row},fit_row:function(a){var c=a.length,d=a[0].locked,e=a[c-1].locked,f=[b.behaviors.grid.weight_per_row];switch(b.behaviors.grid.weight_per_row){case 4:f="original";break;case 3:4===c?f=d||e?[1,2,2,1]:[2,1,1,2]:3===c?f=[1,1,1]:2===c&&(f=d||1===a[0].original_weight?[1,2]:[2,1]);break;case 2:4===c?f=[1,1,1,1]:3===c?f=d&&e?[1,1,1]:d||a[2].original_weight>1?[1,1,2]:[2,1,1]:2===c&&(f=[1,1]);break;case 1:f=[1,1,1,1]};b.behaviors.grid.apply_weights_to_row(a,f)}}}(jQuery,Drupal,this,this.document),jQuery(document).ready(function(a){function b(b){if(0===b.errorCode){var c=b.streamInfo.approvedCommentCount;1===c?a("#comment-count").text(c+" comment"):a("#comment-count").text(c+" comments")}}
function c(){var b,c=a("body").attr("class").split(/\s+/);return a.each(c,function(a,c){c.indexOf("source-")>=0&&(b=c.replace("source-",""))}),b};throttle(function(){if(document.documentElement.clientWidth<930&&!cache.$article_sidebar.hasClass("always-shown")){var b={display:"",right:"",position:"",top:""};cache.$article_sidebar.css(b);for(var c=0;c<cache.$article_sidebar_asides.length;c++)cache.$article_sidebar_asides.eq(c).removeClass("visible")}else{var d=window.innerHeight-68,e=-1,f=a(window).scrollTop();cache.scroll_top=f;for(var g=cache.$article_text_wrappers.length-1;g>=0;g--){var h=cache.$article_text_wrappers.eq(g),i=h.offset().top,j=h.height();e=g;break};if(-1!==e){var k=d;e===cache.$article_text_wrappers.length-1&&(k=j);for(var l=0,c=0;c<cache.$article_sidebar_asides.length;c++)l+cache.$article_sidebar_asides.eq(c).height()<=k?(cache.$article_sidebar_asides.eq(c).addClass("visible"),0!==l&&(l+=40),l+=cache.$article_sidebar_asides.eq(c).height()):cache.$article_sidebar_asides.eq(c).removeClass("visible");var b={display:"block",right:h.offset().left-a("#content").offset().left};document.documentElement.clientWidth<930?b.position="static":i>f+68?(b.position="absolute",b.right=50,b.top=0,b.bottom="auto"):f+68>i+j-l?(b.position="absolute",b.bottom=0,b.top="auto",b.right=50):(b.position="fixed",b.top=68,b.right=h.offset().left),cache.$article_sidebar.css(b)}}},41);if(a("body").hasClass("article")){cache.$article_header=a(".full-article header").first(),cache.$article_sidebar=a(".full-article .sidebar"),cache.$article_sidebar_asides=cache.$article_sidebar.find("aside"),cache.$article_text_wrappers=a(".full-article .text-wrapper"),a(window).on("load scroll resize",function(){});var d=a(".number");a.each(d,function(b,c){numberLength=a(this).text().length,a(this).addClass("number-length-"+numberLength)}),a(document).ready(function(a){var d=c(),e={categoryID:Drupal.settings.commentsCategoryId,streamID:d,callback:b};gigya.comments.getStreamInfo(e)})}}),jQuery(document).ready(function(a){document.location.href.indexOf("archive")>-1&&calendarArchive()}),jQuery(document).ready(function(a){jQuery(".most-popular-toaster .most-popular-article.tab a").click(function(){var a=jQuery(this).attr("href"),b=s_gi(s_account);ga("send","event","Toaster","target",a),b.linkTrackVars="prop36",b.prop36="Toaster Click - "+a,b.tl(this,"o","Toaster Click")}),jQuery(".most-popular-toaster .most-popular-cancel.tab .buttons a").click(function(){var a=jQuery(this).attr("class"),b=s_gi(s_account);ga("send","event","Toaster","Cancel",a),b.linkTrackVars="prop36",b.prop36="Toaster Close - "+a,b.tl(this,"o","Toaster Close")}),jQuery(".layout-component-ines-sponsored-features-sidebar a").click(function(){var a=jQuery(this).attr("href"),b=jQuery(this).closest("li").index()+1,c=s_gi(s_account);ga("send","event","Sponsored Features",b,a),c.linkTrackVars="prop36",c.prop36="Sponsored Features - "+b+" - "+a,c.tl(this,"o","Sponsored Features")}),jQuery("a.email-signpost").click(function(){var a=jQuery(this).attr("href"),b=s_gi(s_account);ga("send","event","Email Signpost",a),b.linkTrackVars="prop36",b.prop36="Email Signpost - "+a,b.tl(this,"o","Email Signpost")}),jQuery(".video-playlist li a").click(function(){var a=jQuery(this).attr("href"),b=jQuery(this).closest("li").index()+1,c=s_gi(s_account);ga("send","event","Popular Videos",b,a),c.linkTrackVars="prop36",c.prop36="Popular Videos - "+b+" - "+a,c.tl(this,"o","Popular Videos")})}),jQuery(document).ready(function(a){a(".toggle-menu a").on("click",function(b){b.preventDefault();var c=a("body").hasClass("menu-visible");c?(a("body").removeClass("menu-visible"),a(window).scrollTop(window.scrollTopBeforeMenuShow)):(window.scrollTopBeforeMenuShow=parseInt(a(window).scrollTop()),a("body").addClass("menu-visible"),a(window).scrollTop(0)),a(this).toggleClass("icon-menu icon-close")})}),jQuery(document).ready(function(a){cache.is_article=jQuery("body").hasClass("article"),cache.$dynamic_header_logotype=jQuery("#dynamic-header .logotype"),cache.$dynamic_header_push=jQuery("#dynamic-header .push"),cache.$dynamic_header_share=jQuery("#dynamic-header .share"),cache.$masthead_logo=jQuery("#masthead .logo"),jQuery(window).scroll(function(){b()});var b=throttle(function(){var a=jQuery(this).scrollTop();a>350&&(cache.is_article&&a<jQuery(".full-article").height()?cache.$dynamic_header_share.hasClass("active")||(cache.$dynamic_header_logotype.removeClass("active"),cache.$masthead_logo.addClass("stamp-only"),cache.$dynamic_header_share.addClass("active"),cache.$dynamic_header_push.removeClass("active")):cache.$dynamic_header_push.hasClass("active")||(cache.$dynamic_header_logotype.removeClass("active"),cache.$masthead_logo.addClass("stamp-only"),cache.$dynamic_header_share.removeClass("active"),cache.$dynamic_header_push.addClass("active"))),350>=a&&!cache.$dynamic_header_logotype.hasClass("active")&&(cache.$dynamic_header_logotype.addClass("active"),cache.$masthead_logo.removeClass("stamp-only"),cache.$dynamic_header_share.removeClass("active"),cache.$dynamic_header_push.removeClass("active")),Drupal.behaviors.grid.weight_per_row<3||jQuery("body").hasClass("menu-visible")||(a>30?jQuery("#masthead").addClass("thin"):30>=a&&jQuery("#masthead").removeClass("thin"))},100)}),jQuery(document).ready(function(a){a("#menu .toggle").on("click",function(b){b.preventDefault(),a(this).parents("ul.topics li").toggleClass("expanded")})}),jQuery(document).ready(function(a){function b(c){a(".dropdown-menu.open, .search-form.open").removeClass("open"),a("#content, .toggle-menu").unbind("click",b)}
function c(b){timer=setTimeout(function(){a(b).addClass("sub-menu-open")},150)};a(".dropdown-toggle").on("click",function(c){c.preventDefault(),c.stopPropagation();var d=a(this).siblings(".dropdown-menu, .search-form");0!==d.length&&(d.hasClass("open")?b():(b(),d.addClass("open"),a("#content, .toggle-menu").bind("click",b)))}),a("header > nav > ol > li").hover(function(){c(a(this));var b=-((120-a(this).innerWidth())/2);a(this).find("ul").css("margin-left",b)},function(){clearTimeout(timer),a(this).removeClass("sub-menu-open")})}),jQuery(".calendar .toggle-year").on("click",function(a){a.preventDefault(),jQuery(this).parents("li").first().toggleClass("expanded")}),jQuery(".share_bar_block .number").each(function(){jQuery(this).parent().css({width:jQuery(this).width()}),jQuery(this).prop("Counter",0).animate({Counter:jQuery(this).text()},{duration:1e3,easing:"swing",step:function(a){jQuery(this).text(Math.ceil(a))}})}),cache.supports.localstorage&&"yes"!==localStorage.getItem("cookie_warning_shown")&&(jQuery("#cookie-warning").addClass("visible"),localStorage.setItem("cookie_warning_shown","yes"),jQuery("#cookie-warning .close").click(function(a){a.preventDefault(),jQuery("#cookie-warning").removeClass("visible")})),cache.supports.localstorage&&"yes"!==localStorage.getItem("trial_message_shown")&&(jQuery("#trial-message").addClass("visible"),localStorage.setItem("trial_message_shown","yes"),jQuery("#trial-message .close").click(function(a){a.preventDefault(),jQuery("#trial-message").removeClass("visible")})),jQuery(document).ready(function(a){function b(b){top.location="#gallery";var d=a(".gallery-open .images li[data-gallery-item="+b+"]"),e=a(".gallery-open .legends li[data-gallery-legend="+b+"]");d.addClass("active"),e.addClass("active");var f=!1;d.lazyload({skip_invisible:!1,effect:"hide",load:function(a,b){f=!0,h()}}),f||c(d),d.nextAll(":lt(2)").lazyload({skip_invisible:!1,effect:"hide"}),d.prevAll(":lt(2)").lazyload({skip_invisible:!1,effect:"hide"}),$last_item=a(".gallery-open .images").find("li").last(),$last_item.lazyload({skip_invisible:!1,effect:"hide"}),$last_item.prev().lazyload({skip_invisible:!1,effect:"hide"}),g(b)}
function c(a){var b=a.attr("data-original"),c={"background-image":'url("'+b+'")'};a.css(c),h()}
function d(){var b=a(".gallery-open .images").find(".active"),d=b.next();d.length?d.addClass("active"):(a(".gallery-open .images").find("li").removeClass("active"),d=a(".gallery-open .images").find("li").first(),d.addClass("active")),b.removeClass("active");var e=!1;d.lazyload({skip_invisible:!1,effect:"hide",load:function(a,b){h()}}),e||c(d),d.nextAll(":lt(3)").each(function(){a(this).lazyload({skip_invisible:!1,effect:"hide"})});var f=a(".gallery-open .images").find("li").index(d);a(".gallery-open .legends .active").removeClass("active"),a(".gallery-open .legends li").eq(f).addClass("active"),g(f+1)}
function e(){var b=a(".gallery-open .images").find(".active"),d=b.prev();d.length?d.addClass("active"):(a(".gallery-open .images").find("li").removeClass("active"),d=a(".gallery-open .images").find("li").last(),d.addClass("active")),b.removeClass("active");var e=!1;d.lazyload({skip_invisible:!1,effect:"hide",load:function(a,b){h()}}),e||c(d),d.prevAll(":lt(3)").each(function(){a(this).lazyload({skip_invisible:!1,effect:"hide"})});var f=a(".gallery-open .images").find("li").index(d);a(".gallery-open .legends .active").removeClass("active"),a(".gallery-open .legends li").eq(f).addClass("active"),g(f+1)}
function f(){a("body").removeClass("fullscreen-gallery"),a(".gallery-open").removeClass("gallery-open")}
function g(b){if("undefined"!=typeof s_gi){var c=s_gi(s_account);c.linkTrackVars="prop2,prop8,prop10,prop15,prop21",c.linkTrackEvents="event3";var d=a(".grid-mod-gallery");c.prop21=d.attr("data-scald-gallery")+" | "+b,c.events="event3","standard_theme"==Drupal.settings.themeName?(c.prop10="",c.prop2="Gallery"):"independent_theme"==Drupal.settings.themeName&&(c.prop15="",c.prop8="Gallery"),c.t(),c.prop2=c.prop21=c.events=c.prop10=""};var e;e=location.href+"?slide_num="+b;ga("send","pageview",e),b%3===0&&"undefined"!=typeof googletag&&googletag.pubads().refresh([gptAdSlots[9]])}
function h(){var b,c,d,e,f,g=a(".gallery-open .images").find(".active");b=a(window).width()>929?a(window).width()-340:a(window).width(),c=a(window).height()-64,d=g.attr("data-original"),d?(e=new Image(),e.src=d,e.onload=function(){f=b/this.width*this.height,0==this.width||0==this.height?f=1e3:f>c&&(f=c),a(".gallery-open .images").css("height",f)}):(f=1e3,a(".gallery-open .images").css("height",f))};a(".grid-mod-gallery a").on("click",function(c){c.preventDefault(),window.addEventListener("orientationchange",h),"undefined"!=typeof googletag&&(a(".mpu5-container").html('<div id="mpu5"></div>'),googletag.display("mpu5")),a("body").addClass("fullscreen-gallery");var d=a(this).parents(".grid-mod-gallery").next(".full-gallery");d.addClass("gallery-open"),"undefined"!=typeof a(this).attr("data-gallery-thumb")?(a(".gallery-open .images li").removeClass("active"),a(".gallery-open .legends li").removeClass("active"),a(this).parents("article").find(".show-all").removeClass("initial-open"),b(a(this).attr("data-gallery-thumb"))):a(this).hasClass("initial-open")&&(a(this).removeClass("initial-open"),b(1))}),a(window).on("hashchange",function(b){"#gallery"===location.hash||a("body").hasClass("fullscreen-gallery")&&f()}),a(".full-gallery .next").on("click",function(a){a.preventDefault(),d()}),a(".full-gallery .prev").on("click",function(a){a.preventDefault(),e()}),a(".full-gallery .close").on("click",function(a){a.preventDefault(),f()}),a(document).keyup(function(b){a("body").hasClass("fullscreen-gallery")&&(37===b.which&&e(),39===b.which&&d(),27===b.which&&f())})}),jQuery(".edition ul a").click(function(){var a=jQuery(this).data("edition");createCookie("geo_location",a,365243),window.location.reload(!0)});var mostpopularloadcontent=function(a){jQuery.getJSON(a,function(a){function b(a){var b=Math.floor((new Date().getTime()-a)/1e3),c=Math.floor(b/31536e3);return c>1?c+" years":(c=Math.floor(b/2592e3),c>1?c+" months":(c=Math.floor(b/86400),c>1?c+" days":(c=Math.floor(b/3600),c>=1?(c=Math.round(b/3600),c+" hours"):(c=Math.floor(b/60),c>=1?c+" minutes":Math.floor(b)+" seconds"))))};cache.$populararticles=a.articles;var c;article=cache.$populararticles[0],article.link==window.location&&(article=cache.$populararticles[1]),published=article.publish_date.replace(/-/g,"/"),published=Date.parse(published),"undefined"!=typeof article.image?image=article.image.thumbnail:image="#",c='<li class="most-popular-article tab"><div class="most-popular-label">Top story</div><a href="'+article.link+'"><span class="image" style="background-image: url(\''+image+'\')"></span><div class="most-popular-text"><p>'+article.short_headline+"</p><p>"+b(published)+'</p></a></div><a href="#" id="most-popular-cancel"><span class="close">Close </span></a></li>',hidehtml='<li class="most-popular-cancel tab"><p>Do you want to hide popular articles just this time or forever?</p><div class="buttons"><ul><li><a href="#" id="most-popular-hide-once">Hide this time</a></li><li><a href="#" id="most-popular-hide-forever">Hide Forever</a></li><li><a href="#" id="most-popular-hide-cancel">Cancel</a></li></ul></div></li>',jQuery(".most-popular-toaster").html("<ul>"+c+hidehtml+"</ul>"),jQuery(window).on("resize",function(){window.innerWidth>=929?jQuery(".most-popular-toaster").css("right",0):jQuery(".most-popular-toaster").css("left",window.innerWidth/2-150)}),window.innerWidth>=929?jQuery(".most-popular-toaster").css("right",0):jQuery(".most-popular-toaster").css("left",window.innerWidth/2-150),jQuery("#most-popular-cancel").on("click",function(a){a.preventDefault(a);var b={left:"-300px"};jQuery(".most-popular-toaster li.tab").css(b)}),jQuery("#most-popular-hide-once").on("click",function(a){a.preventDefault(a);var b=new Date();b.setTime(b.getTime()+864e5);var c="expires="+b.toUTCString();document.cookie="most-popular=dismissed;"+c+";path=/ ",jQuery(".most-popular-toaster").removeClass("visible")}),jQuery("#most-popular-hide-forever").on("click",function(a){a.stopPropagation(a);var b=new Date();b.setTime(b.getTime()+2592e6);var c="expires="+b.toUTCString();document.cookie="most-popular=dismissed;"+c+";path=/ ",jQuery(".most-popular-toaster").removeClass("visible"),a.stopPropagation(a)}),jQuery("#most-popular-hide-cancel").on("click",function(a){a.preventDefault(a);var b={left:"0px"};jQuery(".most-popular-toaster li.tab").css(b)}),jQuery(".most-popular-toaster .most-popular-article.tab a").click(function(){var a=jQuery(this).attr("href"),b=s_gi(s_account);ga("send","event","Toaster","target",a),b.linkTrackVars="prop36",b.prop36="Toaster Click - "+a,b.tl(this,"o","Toaster Click")}),jQuery(".most-popular-toaster .most-popular-cancel.tab .buttons a").click(function(){var a=jQuery(this).attr("class"),b=s_gi(s_account);ga("send","event","Toaster","Cancel",a),b.linkTrackVars="prop36",b.prop36="Toaster Close - "+a,b.tl(this,"o","Toaster Close")});var d=function(){jQuery(".most-popular-toaster").addClass("visible");var a=new Date();a.setTime(a.getTime()+864e5);var b="expires="+a.toUTCString();""==getCookie("most-popular")&&(document.cookie="most-popular=seen;"+b+";path=/ ")};jQuery(window).on("scroll",function(){var a=detectDirection();"dismissed"!=getCookie("most-popular")&&("up"==a?d():(sharebuttonposition=jQuery("#gigya-share-btns-2").offset().top,scrollposition=jQuery(window).scrollTop(),windowheight=jQuery(window).height(),scrollposition+windowheight>sharebuttonposition?d():jQuery(".most-popular-toaster").removeClass("visible")))})})};jQuery(window).on("load",function(){var a=Drupal.settings.most_popular_feed;"seen"!=getCookie("most-popular")&&"dismissed"!=getCookie("most-popular")&&"undefined"!=a&&mostpopularloadcontent(a)});var lastScrollTop=0,st,direction,sticky_leaderboard=function(){var a=jQuery("#leaderboard").find("iframe"),b=a.attr("src");if("undefined"!=typeof b&&-1==b.indexOf("richmedia")){var c=a.height()+40;a&&a.height()>10&&jQuery("#leaderboard").attr("style","min-height:"+c+"px;position: relative; margin-bottom: 5px"),jQuery(window).on("scroll",function(){var b=jQuery(window).scrollTop(),d={};b+a.height()>c?(d.left=(jQuery("#leaderboard").width()-a.width())/2,d.position="absolute",d.bottom=0):(d.left=(jQuery(window).width()-a.width())/2,d.position="fixed",d.bottom=""),a.css(d)})}},sticky_mpu=function(){var a=jQuery(".sidebar #mpu0").find("iframe");if(a.length){var b=a.height();jQuery("#mpu0").offset().top;jQuery(".sidebar #mpu0").css("position","relative"),jQuery(".sidebar #mpu0").css("overflow","hidden"),250==b?(jQuery(".sidebar #mpu0").animate({height:"600px"},3e3),jQuery(window).on("scroll",function(){var b=jQuery(window).scrollTop(),c=jQuery("#mpu0").offset().top;mpupos=b+50-c,mpupos>=0&&mpupos<350?(a.css("position","fixed"),a.css("top",50)):mpupos<0?(a.css("position","absolute"),a.css("top",0)):(a.css("position","absolute"),a.css("top",350))})):600==b&&(jQuery(".sidebar #mpu0").animate({height:"800px"},3e3),jQuery(window).on("scroll",function(){var b=jQuery(window).scrollTop(),c=jQuery("#mpu0").offset().top;mpupos=b+50-c,mpupos>=0&&mpupos<200?(a.css("position","fixed"),a.css("top",50)):mpupos<0?(a.css("position","absolute"),a.css("top",0)):(a.css("position","absolute"),a.css("top",200))}))}};jQuery(window).load(function(){sticky_leaderboard(),sticky_mpu()});;
/* Source and licensing information for the above line(s) can be found at http://www.independent.co.uk/sites/all/themes/ines_themes/ines_theme/js/main.js. */
/* Source and licensing information for the line(s) below can be found at http://www.independent.co.uk/sites/all/themes/ines_themes/ines_theme/js/ads.js. */
var runAds=true;;
/* Source and licensing information for the above line(s) can be found at http://www.independent.co.uk/sites/all/themes/ines_themes/ines_theme/js/ads.js. */
