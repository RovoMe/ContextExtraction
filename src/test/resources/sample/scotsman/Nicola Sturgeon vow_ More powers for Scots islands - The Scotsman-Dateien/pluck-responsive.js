(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
(function (global){
!function(e,t){"use strict";var o="undefined"!=typeof window?window.$:"undefined"!=typeof global?global.$:null;require("../../vendor/detectizr.js"),module.exports=t(e,exports,o,window.Detectizr)}(this,function(e,t,o,n){"use strict";window.PluckController=c||{};var c=function(e){return this.pluckConfig=e,this.pluckApp=void 0,this.pluckCssId=void 0,this.initialize=function(){"mobile"===n.device.type?(this.pluckApp="mobile/comments",this.pluckCssId="pluck-mobile",window.pluckLoadScript(pluckAppProxy.genericBaseUrl+"Direct/JavascriptMobileSDKProxy.js"),this.view=new r):(this.pluckApp="pluck/comments",this.pluckCssId="pluck-comments",this.view=new m),pluckAppProxy.registerActivityCallback("CommentsRendered",this.view.onCommentsRendered),pluckAppProxy.registerActivityCallback("CommentCreate",this.view.onCommentCreate),pluckAppProxy.registerActivityCallback("CommentsRefresh",this.view.onCommentsRefresh);var e=this;o(document).bind("loginEvent",function(){pluckAppProxy.embedApp(e.pluckApp,e.pluckConfig,{elem:e.pluckCssId})})},this.initialize()},i=function(){};i.prototype.render=function(){return console.log("PluckView render."),this},i.prototype.handleAuth=function(e){e.preventDefault(),janrain.capture.ui.modal.open("signIn")},i.prototype.onCommentsRendered=function(){},i.prototype.onCommentCreate=function(){},i.prototype.onCommentsRefresh=function(){};var r=function(){};o.extend(r.prototype,i.prototype),r.prototype.onCommentsRendered=function(){console.log("Pluck mobile comments rendered."),o(".pmobile-comments-submit-wrap .pmobile-comments-submit-header").html('Make a comment <span class="pluck-callToAction-terms">Comments must adhere to our <a href="http://www.johnstonpress.co.uk/terms-conditions" target="_blank">house rules</a></span>');var e=o("#pluck-mobile .pmobile-auth-wrap a.pmobile-primary-button"),t=o(e)[0],n=o(e)[1];o(t).css("display","none"),o(n).html('<span class="pmobile-primary-button-text">Sign in</span>'),o(n).unbind("click").bind("click",function(e){e.preventDefault(),janrain.capture.ui.modal.open("signIn"),o("html, body").animate({scrollTop:o("#header").offset().top},100)}),o(".pmobile-comments-submit-wrap textarea, .pmobile-comments-reply-textarea").attr("placeholder","Add your comment...").val(""),o(".pmobile-comments-reply-wrap h4").html('<span class="pmobile-comments-submit-header">Post a Reply</span>')},r.prototype.onCommentCreate=function(){console.log("Pluck mobile comment create"),PluckService.savePluckUserId(),o(".pmobile-comments-content p").each(function(){var e=this,t=e.innerHTML;e.innerHTML=t.replace(/&nbsp;/gi,"")})},r.prototype.onCommentsRefresh=function(){console.log("Pluck mobile comments refresh"),o(".pmobile-comments-submit-wrap .pmobile-primary-button .pmobile-primary-button-text").text("Post comment"),o(".pmobile-comments-content p").each(function(){var e=this,t=e.innerHTML;e.innerHTML=t.replace(/&nbsp;/gi,"")})};var m=function(){};o.extend(m.prototype,i.prototype);var s=function(){o(".pluck-comm-ReplyLevel-1 > .pluck-comm-single-comment-top > .pluck-comm-single-comment-main").each(function(e,t){var n=o(this);n.removeClass("avatarBackground-0").removeClass("avatarBackground-1").removeClass("avatarBackground-2");var c=e%3;n.addClass("avatarBackground-"+c)})},l=function(){o(".pluck-comm-ReplyLevel-2").each(function(e,t){o(this).find(".pluck-comm-single-comment-main").each(function(e,t){var n=o(this);n.removeClass("avatarBackground-0").removeClass("avatarBackground-1").removeClass("avatarBackground-2");var c=e%3;n.addClass("avatarBackground-"+c)})})};m.prototype.onCommentsRendered=function(){console.log("Pluck desktop comments rendered"),s(),o(".pluck-login-comment-submit-button .pluck-primary-button-text").text("Sign in"),o(".pluck-comm-submit .pluck-primary-button-text").text("Post comment"),o(".pluck-login-comment-submit-button").on("click",function(e){e.preventDefault(),janrain.capture.ui.modal.open("signIn")}),o(".pluck-comment-input-box").attr("placeholder","Add your comment...").val(""),o(".pluck-score-volume").each(function(e,t){var n=o(t),c=o(t).closest(".pluck-comm-single-comment-top "),i=""!=n.attr("downvotes")?n.attr("downvotes"):0,r=""!=n.attr("upvotes")?n.attr("upvotes"):0;c.find(".pluck-thumb-down-link").text("("+i+")"),c.find(".pluck-thumb-up-link").text("("+r+")")}),o(".pluck-login-comment-links-directions").text("Get involved in the discussion and have your say ..."),o(".pluck-comm-input-content .pluck-comm-calltoaction").html('Make a comment <span class="pluck-callToAction-terms">Comments must adhere to our <a href="http://www.johnstonpress.co.uk/terms-conditions" target="_blank">house rules</a></span>')},m.prototype.onCommentsRefresh=function(){console.log("Pluck desktop comments refresh"),o(".pluck-score-volume").each(function(e,t){var n=o(t),c=o(t).closest(".pluck-comm-single-comment-top "),i=""!=n.attr("downvotes")?n.attr("downvotes"):0,r=""!=n.attr("upvotes")?n.attr("upvotes"):0;c.find(".pluck-thumb-down-link").text("("+i+")"),c.find(".pluck-thumb-up-link").text("("+r+")")}),s(),l()},window.PluckController=c});

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"../../vendor/detectizr.js":2}],2:[function(require,module,exports){
window.Detectizr=function(e,n,o,i){function r(e,n){var o,i,t;if(arguments.length>2)for(o=1,i=arguments.length;i>o;o+=1)r(e,arguments[o]);else for(t in n)n.hasOwnProperty(t)&&(e[t]=n[t]);return e}function t(e){return f.browser.userAgent.indexOf(e)>-1}function a(e){return e.test(f.browser.userAgent)}function s(e){return e.exec(f.browser.userAgent)}function d(e){return e.replace(/^\s+|\s+$/g,"")}function m(e){return null===e||e===i?"":String(e).replace(/((\s|\-|\.)+[a-z0-9])/g,function(e){return e.toUpperCase().replace(/(\s|\-|\.)/g,"")})}function l(e,n){var o=n||"",i=1===e.nodeType&&(e.className?(" "+e.className+" ").replace(A," "):"");if(i){for(;i.indexOf(" "+o+" ")>=0;)i=i.replace(" "+o+" "," ");e.className=n?d(i):""}}function c(e,n,o){e&&(e=m(e),n&&(n=m(n),p(e+n,!0),o&&p(e+n+"_"+o,!0)))}function p(e,n){e&&x&&(S.addAllFeaturesAsClass?x.addTest(e,n):(n="function"==typeof n?n():n,n?x.addTest(e,!0):(delete x[e],l(E,e))))}function g(e,n){e.version=n;var o=n.split(".");o.length>0?(o=o.reverse(),e.major=o.pop(),o.length>0?(e.minor=o.pop(),o.length>0?(o=o.reverse(),e.patch=o.join(".")):e.patch="0"):e.minor="0"):e.major="0"}function u(){e.clearTimeout(h),h=e.setTimeout(function(){y=f.device.orientation,e.innerHeight>e.innerWidth?f.device.orientation="portrait":f.device.orientation="landscape",p(f.device.orientation,!0),y!==f.device.orientation&&p(y,!1)},10)}function w(e){var o,i,r,t,a,s=n.plugins;for(t=s.length-1;t>=0;t--){for(o=s[t],i=o.name+o.description,r=0,a=e.length;a>=0;a--)-1!==i.indexOf(e[a])&&(r+=1);if(r===e.length)return!0}return!1}function v(e){var n;for(n=e.length-1;n>=0;n--)try{new ActiveXObject(e[n])}catch(o){}return!1}function b(i){var d,l,b,h,y,A,E;if(S=r({},S,i||{}),S.detectDevice){for(f.device={type:"",model:"",orientation:""},b=f.device,a(/googletv|smarttv|smart-tv|internet.tv|netcast|nettv|appletv|boxee|kylo|roku|dlnadoc|roku|pov_tv|hbbtv|ce\-html/)?(b.type=k[0],b.model="smartTv"):a(/xbox|playstation.3|wii/)?(b.type=k[0],b.model="gameConsole"):a(/ip(a|ro)d/)?(b.type=k[1],b.model="ipad"):a(/tablet/)&&!a(/rx-34/)||a(/folio/)?(b.type=k[1],b.model=String(s(/playbook/)||"")):a(/linux/)&&a(/android/)&&!a(/fennec|mobi|htc.magic|htcX06ht|nexus.one|sc-02b|fone.945/)?(b.type=k[1],b.model="android"):a(/kindle/)||a(/mac.os/)&&a(/silk/)?(b.type=k[1],b.model="kindle"):a(/gt-p10|sc-01c|shw-m180s|sgh-t849|sch-i800|shw-m180l|sph-p100|sgh-i987|zt180|htc(.flyer|\_flyer)|sprint.atp51|viewpad7|pandigital(sprnova|nova)|ideos.s7|dell.streak.7|advent.vega|a101it|a70bht|mid7015|next2|nook/)||a(/mb511/)&&a(/rutem/)?(b.type=k[1],b.model="android"):a(/bb10/)?(b.type=k[1],b.model="blackberry"):(b.model=s(/iphone|ipod|android|blackberry|opera mini|opera mobi|skyfire|maemo|windows phone|palm|iemobile|symbian|symbianos|fennec|j2me/),null!==b.model?(b.type=k[2],b.model=String(b.model)):(b.model="",a(/bolt|fennec|iris|maemo|minimo|mobi|mowser|netfront|novarra|prism|rx-34|skyfire|tear|xv6875|xv6975|google.wireless.transcoder/)?b.type=k[2]:a(/opera/)&&a(/windows.nt.5/)&&a(/htc|xda|mini|vario|samsung\-gt\-i8000|samsung\-sgh\-i9/)?b.type=k[2]:a(/windows.(nt|xp|me|9)/)&&!a(/phone/)||a(/win(9|.9|nt)/)||a(/\(windows 8\)/)?b.type=k[3]:a(/macintosh|powerpc/)&&!a(/silk/)?(b.type=k[3],b.model="mac"):a(/linux/)&&a(/x11/)?b.type=k[3]:a(/solaris|sunos|bsd/)?b.type=k[3]:a(/cros/)?b.type=k[3]:a(/bot|crawler|spider|yahoo|ia_archiver|covario-ids|findlinks|dataparksearch|larbin|mediapartners-google|ng-search|snappy|teoma|jeeves|tineye/)&&!a(/mobile/)?(b.type=k[3],b.model="crawler"):b.type=k[2])),d=0,l=k.length;l>d;d+=1)p(k[d],b.type===k[d]);S.detectDeviceModel&&p(m(b.model),!0)}if(S.detectScreen&&(b.screen={},x&&x.mq&&(x.mq("only screen and (max-width: 240px)")?(b.screen.size="veryVerySmall",p("veryVerySmallScreen",!0)):x.mq("only screen and (max-width: 320px)")?(b.screen.size="verySmall",p("verySmallScreen",!0)):x.mq("only screen and (max-width: 480px)")&&(b.screen.size="small",p("smallScreen",!0)),(b.type===k[1]||b.type===k[2])&&x.mq("only screen and (-moz-min-device-pixel-ratio: 1.3), only screen and (-o-min-device-pixel-ratio: 2.6/2), only screen and (-webkit-min-device-pixel-ratio: 1.3), only screen  and (min-device-pixel-ratio: 1.3), only screen and (min-resolution: 1.3dppx)")&&(b.screen.resolution="high",p("highresolution",!0))),b.type===k[1]||b.type===k[2]?(e.onresize=function(e){u(e)},u()):(b.orientation="landscape",p(b.orientation,!0))),S.detectOS&&(f.os={},h=f.os,""!==b.model&&("ipad"===b.model||"iphone"===b.model||"ipod"===b.model?(h.name="ios",g(h,(a(/os\s([\d_]+)/)?RegExp.$1:"").replace(/_/g,"."))):"android"===b.model?(h.name="android",g(h,a(/android\s([\d\.]+)/)?RegExp.$1:"")):"blackberry"===b.model?(h.name="blackberry",g(h,a(/version\/([^\s]+)/)?RegExp.$1:"")):"playbook"===b.model&&(h.name="blackberry",g(h,a(/os ([^\s]+)/)?RegExp.$1.replace(";",""):""))),h.name||(t("win")||t("16bit")?(h.name="windows",t("windows nt 6.3")?g(h,"8.1"):t("windows nt 6.2")||a(/\(windows 8\)/)?g(h,"8"):t("windows nt 6.1")?g(h,"7"):t("windows nt 6.0")?g(h,"vista"):t("windows nt 5.2")||t("windows nt 5.1")||t("windows xp")?g(h,"xp"):t("windows nt 5.0")||t("windows 2000")?g(h,"2k"):t("winnt")||t("windows nt")?g(h,"nt"):t("win98")||t("windows 98")?g(h,"98"):(t("win95")||t("windows 95"))&&g(h,"95")):t("mac")||t("darwin")?(h.name="mac os",t("68k")||t("68000")?g(h,"68k"):t("ppc")||t("powerpc")?g(h,"ppc"):t("os x")&&g(h,(a(/os\sx\s([\d_]+)/)?RegExp.$1:"os x").replace(/_/g,"."))):t("webtv")?h.name="webtv":t("x11")||t("inux")?h.name="linux":t("sunos")?h.name="sun":t("irix")?h.name="irix":t("freebsd")?h.name="freebsd":t("bsd")&&(h.name="bsd")),h.name&&(p(h.name,!0),h.major&&(c(h.name,h.major),h.minor&&c(h.name,h.major,h.minor))),a(/\sx64|\sx86|\swin64|\swow64|\samd64/)?h.addressRegisterSize="64bit":h.addressRegisterSize="32bit",p(h.addressRegisterSize,!0)),S.detectBrowser&&(y=f.browser,a(/opera|webtv/)||!a(/msie\s([\d\w\.]+)/)&&!t("trident")?t("firefox")?(y.engine="gecko",y.name="firefox",g(y,a(/firefox\/([\d\w\.]+)/)?RegExp.$1:"")):t("gecko/")?y.engine="gecko":t("opera")?(y.name="opera",y.engine="presto",g(y,a(/version\/([\d\.]+)/)?RegExp.$1:a(/opera(\s|\/)([\d\.]+)/)?RegExp.$2:"")):t("konqueror")?y.name="konqueror":t("chrome")?(y.engine="webkit",y.name="chrome",g(y,a(/chrome\/([\d\.]+)/)?RegExp.$1:"")):t("iron")?(y.engine="webkit",y.name="iron"):t("crios")?(y.name="chrome",y.engine="webkit",g(y,a(/crios\/([\d\.]+)/)?RegExp.$1:"")):t("applewebkit/")?(y.name="safari",y.engine="webkit",g(y,a(/version\/([\d\.]+)/)?RegExp.$1:"")):t("mozilla/")&&(y.engine="gecko"):(y.engine="trident",y.name="ie",!e.addEventListener&&o.documentMode&&7===o.documentMode?g(y,"8.compat"):a(/trident.*rv[ :](\d+)\./)?g(y,RegExp.$1):g(y,a(/trident\/4\.0/)?"8":RegExp.$1)),y.name&&(p(y.name,!0),y.major&&(c(y.name,y.major),y.minor&&c(y.name,y.major,y.minor))),p(y.engine,!0),y.language=n.userLanguage||n.language,p(y.language,!0)),S.detectPlugins){for(y.plugins=[],d=j.length-1;d>=0;d--)A=j[d],E=!1,e.ActiveXObject?E=v(A.progIds):n.plugins&&(E=w(A.substrs)),E&&(y.plugins.push(A.name),p(A.name,!0));n.javaEnabled()&&(y.plugins.push("java"),p("java",!0))}}var h,y,f={},x=e.Modernizr,k=["tv","tablet","mobile","desktop"],S={addAllFeaturesAsClass:!1,detectDevice:!0,detectDeviceModel:!0,detectScreen:!0,detectOS:!0,detectBrowser:!0,detectPlugins:!0},j=[{name:"adobereader",substrs:["Adobe","Acrobat"],progIds:["AcroPDF.PDF","PDF.PDFCtrl.5"]},{name:"flash",substrs:["Shockwave Flash"],progIds:["ShockwaveFlash.ShockwaveFlash.1"]},{name:"wmplayer",substrs:["Windows Media"],progIds:["wmplayer.ocx"]},{name:"silverlight",substrs:["Silverlight"],progIds:["AgControl.AgControl"]},{name:"quicktime",substrs:["QuickTime"],progIds:["QuickTime.QuickTime"]}],A=/[\t\r\n]/g,E=o.documentElement;return f.detect=function(e){return b(e)},f.init=function(){f!==i&&(f.browser={userAgent:(n.userAgent||n.vendor||e.opera).toLowerCase()},f.detect())},f.init(),f}(window,window.navigator,window.document);

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL25vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJEOlxcb3B0XFxwMTBlbmRhdmFcXHNyY1xcd2ViXFxkaXNwYXRjaGVyXFxhc3NldHNcXHNjcmlwdFxcbW9kdWxlc1xccGx1Y2tcXHBsdWNrLXJlc3BvbnNpdmUuanMiLCJEOlxcb3B0XFxwMTBlbmRhdmFcXHNyY1xcd2ViXFxkaXNwYXRjaGVyXFxhc3NldHNcXHNjcmlwdFxcdmVuZG9yXFxkZXRlY3RpenIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7O0NDQUMsU0FBUyxFQUFNLEdBQ1osWUFFQSxJQUFJLEdBQXVCLG1CQUFYLFFBQXlCLE9BQVUsRUFBc0IsbUJBQVgsUUFBeUIsT0FBVSxFQUFJLElBRXJHLFNBQVEsNkJBRVIsT0FBTyxRQUFVLEVBQVEsRUFBTSxRQUFTLEVBQUcsT0FBTyxZQUNwRCxLQUFNLFNBQVMsRUFBTSxFQUFTLEVBQUcsR0FDL0IsWUFFQSxRQUFPLGdCQUFrQixLQUV6QixJQUFJLEdBQWtCLFNBQVMsR0FrQzNCLE1BakNBLE1BQUssWUFBYyxFQUNuQixLQUFLLFNBQVcsT0FDaEIsS0FBSyxXQUFhLE9BRWxCLEtBQUssV0FBYSxXQUVnQixXQUExQixFQUFVLE9BQU8sTUFDakIsS0FBSyxTQUFXLGtCQUNoQixLQUFLLFdBQWEsZUFDbEIsT0FBTyxnQkFBZ0IsY0FBYyxlQUFpQixzQ0FFdEQsS0FBSyxLQUFPLEdBQUksS0FFaEIsS0FBSyxTQUFXLGlCQUNoQixLQUFLLFdBQWEsaUJBRWxCLEtBQUssS0FBTyxHQUFJLElBR3BCLGNBQWMseUJBQXlCLG1CQUNuQyxLQUFLLEtBQUssb0JBQ2QsY0FBYyx5QkFBeUIsZ0JBQ25DLEtBQUssS0FBSyxpQkFDZCxjQUFjLHlCQUF5QixrQkFDbkMsS0FBSyxLQUFLLGtCQUVkLElBQUksR0FBUSxJQUNaLEdBQUUsVUFBVSxLQUFLLGFBQWEsV0FDMUIsY0FB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QUNwQixFQUFjLEVBQWEsRUFBYyxVQUV0QyxJQUNILEVBQVEsUUFBUSxLQUFLLEVBQWMsTUFDbkMsRUFBbUIsRUFBYyxNQUFNLEdBR3JDLEdBQVUsZ0JBQ2IsRUFBUSxRQUFRLEtBQUssUUFDckIsRUFBbUIsUUFBUSxLQTVlOUIsR0E0Q0MsR0FDQSxFQTdDRyxLQUNILEVBQVksRUFBTyxVQUNuQixHQUFlLEtBQU0sU0FBVSxTQUFVLFdBQ3pDLEdBRUMsdUJBQXVCLEVBRXZCLGNBQWMsRUFFZCxtQkFBbUIsRUFFbkIsY0FBYyxFQUVkLFVBQVUsRUFFVixlQUFlLEVBRWYsZUFBZSxHQUVoQixJQUNDLEtBQU0sY0FDTixTQUFVLFFBQVMsV0FHbkIsU0FBVSxjQUFlLG1CQUV6QixLQUFNLFFBQ04sU0FBVSxtQkFDVixTQUFVLHFDQUVWLEtBQU0sV0FDTixTQUFVLGlCQUNWLFNBQVUsa0JBRVYsS0FBTSxjQUNOLFNBQVUsZUFDVixTQUFVLHlCQUVWLEtBQU0sWUFDTixTQUFVLGFBQ1YsU0FBVSx5QkFFWCxFQUFTLFlBQ1QsRUFBYSxFQUFTLGVBa2R2QixPQWJBLEdBQVUsT0FBUyxTQUFTLEdBQzNCLE1BQU8sR0FBTyxJQUVmLEVBQVUsS0FBTyxXQUNaLElBQWMsSUFDakIsRUFBVSxTQUNULFdBQVksRUFBVSxXQUFhLEVBQVUsUUFBVSxFQUFPLE9BQU8sZUFFdEUsRUFBVSxXQUdaLEVBQVUsT0FFSCxHQUNOLE9BQVEsT0FBTyxVQUFXLE9BQU8iLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiKGZ1bmN0aW9uKHJvb3QsIGZhY3RvcnkpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICB2YXIgJCA9ICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93WyckJ10gOiB0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsWyckJ10gOiBudWxsKTtcclxuXHJcbiAgICByZXF1aXJlKFwiLi4vLi4vdmVuZG9yL2RldGVjdGl6ci5qc1wiKSxcclxuICAgICAgICAgICAgXHJcbiAgICBtb2R1bGUuZXhwb3J0cyA9IGZhY3Rvcnkocm9vdCwgZXhwb3J0cywgJCwgd2luZG93LkRldGVjdGl6cik7ICAgIFxyXG59KHRoaXMsIGZ1bmN0aW9uKHJvb3QsIGV4cG9ydHMsICQsIERldGVjdGl6cikge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIHdpbmRvdy5QbHVja0NvbnRyb2xsZXIgPSBQbHVja0NvbnRyb2xsZXIgfHwge307XHJcblxyXG4gICAgdmFyIFBsdWNrQ29udHJvbGxlciA9IGZ1bmN0aW9uKG9wdGlvbnMpe1xyXG4gICAgICAgIHRoaXMucGx1Y2tDb25maWcgPSBvcHRpb25zO1xyXG4gICAgICAgIHRoaXMucGx1Y2tBcHAgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5wbHVja0Nzc0lkID0gdW5kZWZpbmVkO1xyXG5cclxuICAgICAgICB0aGlzLmluaXRpYWxpemUgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgIGlmIChEZXRlY3RpenIuZGV2aWNlLnR5cGUgPT09IFwibW9iaWxlXCIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucGx1Y2tBcHAgPSBcIm1vYmlsZS9jb21tZW50c1wiO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wbHVja0Nzc0lkID0gXCJwbHVjay1tb2JpbGVcIjtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5wbHVja0xvYWRTY3JpcHQocGx1Y2tBcHBQcm94eS5nZW5lcmljQmFzZVVybCArIFwiRGlyZWN0L0phdmFzY3JpcHRNb2JpbGVTREtQcm94eS5qc1wiKTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnZpZXcgPSBuZXcgUGx1Y2tNb2JpbGVWaWV3KCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWNrQXBwID0gXCJwbHVjay9jb21tZW50c1wiO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wbHVja0Nzc0lkID0gXCJwbHVjay1jb21tZW50c1wiO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMudmlldyA9IG5ldyBQbHVja0Rlc2t0b3BWaWV3KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHBsdWNrQXBwUHJveHkucmVnaXN0ZXJBY3Rpdml0eUNhbGxiYWNrKCdDb21tZW50c1JlbmRlcmVkJywgXHJcbiAgICAgICAgICAgICAgICB0aGlzLnZpZXcub25Db21tZW50c1JlbmRlcmVkKTtcclxuICAgICAgICAgICAgcGx1Y2tBcHBQcm94eS5yZWdpc3RlckFjdGl2aXR5Q2FsbGJhY2soJ0NvbW1lbnRDcmVhdGUnLCBcclxuICAgICAgICAgICAgICAgIHRoaXMudmlldy5vbkNvbW1lbnRDcmVhdGUpO1xyXG4gICAgICAgICAgICBwbHVja0FwcFByb3h5LnJlZ2lzdGVyQWN0aXZpdHlDYWxsYmFjaygnQ29tbWVudHNSZWZyZXNoJywgXHJcbiAgICAgICAgICAgICAgICB0aGlzLnZpZXcub25Db21tZW50c1JlZnJlc2gpO1xyXG5cclxuICAgICAgICAgICAgdmFyIF9zZWxmID0gdGhpcztcclxuICAgICAgICAgICAgJChkb2N1bWVudCkuYmluZCgnbG9naW5FdmVudCcsZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBwbHVja0FwcFByb3h5LmVtYmVkQXBwKF9zZWxmLnBsdWNrQXBwLCBfc2VsZi5wbHVja0NvbmZpZywgXHJcbiAgICAgICAgICAgICAgICAgICAge2VsZW06IF9zZWxmLnBsdWNrQ3NzSWR9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5pdGlhbGl6ZSgpO1xyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgUGx1Y2tWaWV3ID0gZnVuY3Rpb24oKXtcclxuICAgIH07XHJcblxyXG4gICAgUGx1Y2tWaWV3LnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIlBsdWNrVmlldyByZW5kZXIuXCIpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuXHJcbiAgICBQbHVja1ZpZXcucHJvdG90eXBlLmhhbmRsZUF1dGg9IGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgamFucmFpbi5jYXB0dXJlLnVpLm1vZGFsLm9wZW4oXCJzaWduSW5cIik7XHJcbiAgICAgICAgICAgIC8vIHNjcm9sbCB0byBvcGVuZWQgbW9kYWxcclxuICAgICAgICAgICAgLy8kKFwiaHRtbCwgYm9keVwiKS5hbmltYXRlKHtzY3JvbGxUb3A6ICQoXCIjaGVhZGVyXCIpLm9mZnNldCgpLnRvcH0sIDEwMCk7XHJcbiAgICB9O1xyXG5cclxuICAgIFBsdWNrVmlldy5wcm90b3R5cGUub25Db21tZW50c1JlbmRlcmVkPSBmdW5jdGlvbigpe1xyXG4gICAgfTtcclxuICAgICAgICBcclxuICAgIFBsdWNrVmlldy5wcm90b3R5cGUub25Db21tZW50Q3JlYXRlPSBmdW5jdGlvbigpe1xyXG4gICAgfTtcclxuICAgICAgICBcclxuICAgIFBsdWNrVmlldy5wcm90b3R5cGUub25Db21tZW50c1JlZnJlc2g9IGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgUGx1Y2tNb2JpbGVWaWV3ID0gZnVuY3Rpb24oKXtcclxuICAgIH07XHJcblxyXG4gICAgJC5leHRlbmQoUGx1Y2tNb2JpbGVWaWV3LnByb3RvdHlwZSwgUGx1Y2tWaWV3LnByb3RvdHlwZSk7XHJcblxyXG4gICAgUGx1Y2tNb2JpbGVWaWV3LnByb3RvdHlwZS5vbkNvbW1lbnRzUmVuZGVyZWQgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlBsdWNrIG1vYmlsZSBjb21tZW50cyByZW5kZXJlZC5cIik7XHJcblxyXG4gICAgICAgICAgICAkKFwiLnBtb2JpbGUtY29tbWVudHMtc3VibWl0LXdyYXAgLnBtb2JpbGUtY29tbWVudHMtc3VibWl0LWhlYWRlclwiKS5odG1sKCdNYWtlIGEgY29tbWVudCA8c3BhbiBjbGFzcz1cInBsdWNrLWNhbGxUb0FjdGlvbi10ZXJtc1wiPkNvbW1lbnRzIG11c3QgYWRoZXJlIHRvIG91ciA8YSBocmVmPVwiaHR0cDovL3d3dy5qb2huc3RvbnByZXNzLmNvLnVrL3Rlcm1zLWNvbmRpdGlvbnNcIiB0YXJnZXQ9XCJfYmxhbmtcIj5ob3VzZSBydWxlczwvYT48L3NwYW4+Jyk7XHJcblxyXG4gICAgICAgICAgICB2YXIgYXV0aEJ1dHRvbnMgPSAkKCcjcGx1Y2stbW9iaWxlIC5wbW9iaWxlLWF1dGgtd3JhcCBhLnBtb2JpbGUtcHJpbWFyeS1idXR0b24nKTtcclxuICAgICAgICAgICAgdmFyIHJlZ2lzdGVyQnV0dG9uID0gJChhdXRoQnV0dG9ucylbMF07XHJcbiAgICAgICAgICAgIHZhciBsb2dpbkJ1dHRvbiA9ICQoYXV0aEJ1dHRvbnMpWzFdO1xyXG5cclxuICAgICAgICAgICAgJChyZWdpc3RlckJ1dHRvbikuY3NzKCdkaXNwbGF5JywgJ25vbmUnKTtcclxuICAgICAgICAgICAgJChsb2dpbkJ1dHRvbikuaHRtbCgnPHNwYW4gY2xhc3M9XCJwbW9iaWxlLXByaW1hcnktYnV0dG9uLXRleHRcIj5TaWduIGluPC9zcGFuPicpO1xyXG4gICAgICAgICAgICAkKGxvZ2luQnV0dG9uKS51bmJpbmQoJ2NsaWNrJykuYmluZCgnY2xpY2snLCBmdW5jdGlvbihlKXtcclxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIGphbnJhaW4uY2FwdHVyZS51aS5tb2RhbC5vcGVuKFwic2lnbkluXCIpO1xyXG4gICAgICAgICAgICAgICAgLy8gc2Nyb2xsIHRvIG9wZW5lZCBtb2RhbFxyXG4gICAgICAgICAgICAgICAgJChcImh0bWwsIGJvZHlcIikuYW5pbWF0ZSh7c2Nyb2xsVG9wOiAkKFwiI2hlYWRlclwiKS5vZmZzZXQoKS50b3B9LDEwMCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgJChcIi5wbW9iaWxlLWNvbW1lbnRzLXN1Ym1pdC13cmFwIHRleHRhcmVhLCAucG1vYmlsZS1jb21tZW50cy1yZXBseS10ZXh0YXJlYVwiKVxyXG4gICAgICAgICAgICAgICAgLmF0dHIoXCJwbGFjZWhvbGRlclwiLCBcIkFkZCB5b3VyIGNvbW1lbnQuLi5cIilcclxuICAgICAgICAgICAgICAgIC52YWwoXCJcIik7XHJcblxyXG4gICAgICAgICAgICAkKFwiLnBtb2JpbGUtY29tbWVudHMtcmVwbHktd3JhcCBoNFwiKS5odG1sKCc8c3BhbiBjbGFzcz1cInBtb2JpbGUtY29tbWVudHMtc3VibWl0LWhlYWRlclwiPlBvc3QgYSBSZXBseTwvc3Bhbj4nKTtcclxuICAgIH07XHJcblxyXG4gICAgUGx1Y2tNb2JpbGVWaWV3LnByb3RvdHlwZS5vbkNvbW1lbnRDcmVhdGUgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlBsdWNrIG1vYmlsZSBjb21tZW50IGNyZWF0ZVwiKTtcclxuXHJcbiAgICAgICAgICAgIFBsdWNrU2VydmljZS5zYXZlUGx1Y2tVc2VySWQoKTtcclxuICAgICAgICAgICAgJChcIi5wbW9iaWxlLWNvbW1lbnRzLWNvbnRlbnQgcFwiKS5lYWNoKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICB2YXIgcCA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICB2YXIgaCA9IHAuaW5uZXJIVE1MO1xyXG4gICAgICAgICAgICAgICAgcC5pbm5lckhUTUwgPSBoLnJlcGxhY2UoLyZuYnNwOy9naSwnJyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICBQbHVja01vYmlsZVZpZXcucHJvdG90eXBlLm9uQ29tbWVudHNSZWZyZXNoID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJQbHVjayBtb2JpbGUgY29tbWVudHMgcmVmcmVzaFwiKTtcclxuICAgICAgICAgICAgJChcIi5wbW9iaWxlLWNvbW1lbnRzLXN1Ym1pdC13cmFwIC5wbW9iaWxlLXByaW1hcnktYnV0dG9uIC5wbW9iaWxlLXByaW1hcnktYnV0dG9uLXRleHRcIikudGV4dChcIlBvc3QgY29tbWVudFwiKTtcclxuICAgICAgICAgICAgJChcIi5wbW9iaWxlLWNvbW1lbnRzLWNvbnRlbnQgcFwiKS5lYWNoKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICB2YXIgcCA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICB2YXIgaCA9IHAuaW5uZXJIVE1MO1xyXG4gICAgICAgICAgICAgICAgcC5pbm5lckhUTUwgPSBoLnJlcGxhY2UoLyZuYnNwOy9naSwnJyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgUGx1Y2tEZXNrdG9wVmlldyA9IGZ1bmN0aW9uKCl7XHJcbiAgICB9O1xyXG5cclxuICAgICQuZXh0ZW5kKFBsdWNrRGVza3RvcFZpZXcucHJvdG90eXBlLCBQbHVja1ZpZXcucHJvdG90eXBlKTtcclxuXHJcbiAgICB2YXIgcmVmcmVzaEF2YXRhcnNGaXJzdExldmVsID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAvKnNldCBhdmF0YXIgY29sb3IqL1xyXG4gICAgICAgICAgICAkKFwiLnBsdWNrLWNvbW0tUmVwbHlMZXZlbC0xID4gLnBsdWNrLWNvbW0tc2luZ2xlLWNvbW1lbnQtdG9wID4gLnBsdWNrLWNvbW0tc2luZ2xlLWNvbW1lbnQtbWFpblwiKS5lYWNoKGZ1bmN0aW9uKGluZGV4LCB2YWx1ZSl7XHJcbiAgICAgICAgICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgJHRoaXMucmVtb3ZlQ2xhc3MoJ2F2YXRhckJhY2tncm91bmQtMCcpLnJlbW92ZUNsYXNzKCdhdmF0YXJCYWNrZ3JvdW5kLTEnKS5yZW1vdmVDbGFzcygnYXZhdGFyQmFja2dyb3VuZC0yJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgaSA9IGluZGV4ICUgMztcclxuICAgICAgICAgICAgICAgICR0aGlzLmFkZENsYXNzKCdhdmF0YXJCYWNrZ3JvdW5kLScraSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgcmVmcmVzaEF2YXRhcnNTZWNvbmRMZXZlbCA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgJChcIi5wbHVjay1jb21tLVJlcGx5TGV2ZWwtMlwiKS5lYWNoKGZ1bmN0aW9uKGluZCwgdmFsKXtcclxuICAgICAgICAgICAgICQodGhpcykuZmluZChcIi5wbHVjay1jb21tLXNpbmdsZS1jb21tZW50LW1haW5cIikuZWFjaChmdW5jdGlvbihpbmRleCwgdmFsdWUpe1xyXG4gICAgICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcclxuICAgICAgICAgICAgICAgICR0aGlzLnJlbW92ZUNsYXNzKCdhdmF0YXJCYWNrZ3JvdW5kLTAnKS5yZW1vdmVDbGFzcygnYXZhdGFyQmFja2dyb3VuZC0xJykucmVtb3ZlQ2xhc3MoJ2F2YXRhckJhY2tncm91bmQtMicpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGkgPSBpbmRleCAlIDM7XHJcbiAgICAgICAgICAgICAgICAkdGhpcy5hZGRDbGFzcygnYXZhdGFyQmFja2dyb3VuZC0nK2kpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgUGx1Y2tEZXNrdG9wVmlldy5wcm90b3R5cGUub25Db21tZW50c1JlbmRlcmVkID0gZnVuY3Rpb24oKXtcclxuICAgICAgICBcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJQbHVjayBkZXNrdG9wIGNvbW1lbnRzIHJlbmRlcmVkXCIpO1xyXG5cclxuICAgICAgICAgICAgcmVmcmVzaEF2YXRhcnNGaXJzdExldmVsKCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAkKFwiLnBsdWNrLWxvZ2luLWNvbW1lbnQtc3VibWl0LWJ1dHRvbiAucGx1Y2stcHJpbWFyeS1idXR0b24tdGV4dFwiKS50ZXh0KFwiU2lnbiBpblwiKTtcclxuXHJcbiAgICAgICAgICAgICQoXCIucGx1Y2stY29tbS1zdWJtaXQgLnBsdWNrLXByaW1hcnktYnV0dG9uLXRleHRcIikudGV4dChcIlBvc3QgY29tbWVudFwiKTtcclxuXHJcbiAgICAgICAgICAgICQoXCIucGx1Y2stbG9naW4tY29tbWVudC1zdWJtaXQtYnV0dG9uXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24oZXYpe1xyXG4gICAgICAgICAgICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIGphbnJhaW4uY2FwdHVyZS51aS5tb2RhbC5vcGVuKFwic2lnbkluXCIpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICQoXCIucGx1Y2stY29tbWVudC1pbnB1dC1ib3hcIikuYXR0cihcInBsYWNlaG9sZGVyXCIsIFwiQWRkIHlvdXIgY29tbWVudC4uLlwiKS52YWwoXCJcIik7XHJcblxyXG5cdFx0XHQkKFwiLnBsdWNrLXNjb3JlLXZvbHVtZVwiKS5lYWNoKGZ1bmN0aW9uKGksIG9iaikge1xyXG5cdFx0XHRcdHZhciAkc2NvcmU9ICAkKG9iaik7XHJcblx0XHRcdFx0dmFyIGNvbnRhaW5lciA9ICQob2JqKS5jbG9zZXN0KFwiLnBsdWNrLWNvbW0tc2luZ2xlLWNvbW1lbnQtdG9wIFwiKTtcclxuXHRcdFx0XHR2YXIgJHZvdGVzRG93biA9ICRzY29yZS5hdHRyKFwiZG93bnZvdGVzXCIpICE9IFwiXCIgPyAkc2NvcmUuYXR0cihcImRvd252b3Rlc1wiKSA6IDA7XHJcblx0XHRcdFx0dmFyICR2b3Rlc1VwID0gJHNjb3JlLmF0dHIoXCJ1cHZvdGVzXCIpICE9IFwiXCIgPyAkc2NvcmUuYXR0cihcInVwdm90ZXNcIikgOiAwO1xyXG5cdFx0XHRcdGNvbnRhaW5lci5maW5kKFwiLnBsdWNrLXRodW1iLWRvd24tbGlua1wiKS50ZXh0KFwiKFwiICsgJHZvdGVzRG93biArIFwiKVwiKTtcclxuXHRcdFx0XHRjb250YWluZXIuZmluZChcIi5wbHVjay10aHVtYi11cC1saW5rXCIpLnRleHQoXCIoXCIgKyAkdm90ZXNVcCArIFwiKVwiKTtcclxuXHRcdFx0fSk7XHJcblxyXG4gICAgICAgICAgICAkKFwiLnBsdWNrLWxvZ2luLWNvbW1lbnQtbGlua3MtZGlyZWN0aW9uc1wiKS50ZXh0KFwiR2V0IGludm9sdmVkIGluIHRoZSBkaXNjdXNzaW9uIGFuZCBoYXZlIHlvdXIgc2F5IC4uLlwiKTtcclxuXHJcbiAgICAgICAgICAgICQoXCIucGx1Y2stY29tbS1pbnB1dC1jb250ZW50IC5wbHVjay1jb21tLWNhbGx0b2FjdGlvblwiKS5odG1sKCdNYWtlIGEgY29tbWVudCA8c3BhbiBjbGFzcz1cInBsdWNrLWNhbGxUb0FjdGlvbi10ZXJtc1wiPkNvbW1lbnRzIG11c3QgYWRoZXJlIHRvIG91ciA8YSBocmVmPVwiaHR0cDovL3d3dy5qb2huc3RvbnByZXNzLmNvLnVrL3Rlcm1zLWNvbmRpdGlvbnNcIiB0YXJnZXQ9XCJfYmxhbmtcIj5ob3VzZSBydWxlczwvYT48L3NwYW4+Jyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgIFxyXG4gICAgfTtcclxuXHJcbiAgICBQbHVja0Rlc2t0b3BWaWV3LnByb3RvdHlwZS5vbkNvbW1lbnRzUmVmcmVzaCA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiUGx1Y2sgZGVza3RvcCBjb21tZW50cyByZWZyZXNoXCIpO1xyXG5cclxuICAgICAgICAgICAgJChcIi5wbHVjay1zY29yZS12b2x1bWVcIikuZWFjaChmdW5jdGlvbihpLCBvYmopIHtcclxuXHRcdFx0XHR2YXIgJHNjb3JlPSAgJChvYmopO1xyXG5cdFx0XHRcdHZhciBjb250YWluZXIgPSAkKG9iaikuY2xvc2VzdChcIi5wbHVjay1jb21tLXNpbmdsZS1jb21tZW50LXRvcCBcIik7XHJcblx0XHRcdFx0dmFyICR2b3Rlc0Rvd24gPSAkc2NvcmUuYXR0cihcImRvd252b3Rlc1wiKSAhPSBcIlwiID8gJHNjb3JlLmF0dHIoXCJkb3dudm90ZXNcIikgOiAwO1xyXG5cdFx0XHRcdHZhciAkdm90ZXNVcCA9ICRzY29yZS5hdHRyKFwidXB2b3Rlc1wiKSAhPSBcIlwiID8gJHNjb3JlLmF0dHIoXCJ1cHZvdGVzXCIpIDogMDtcclxuXHRcdFx0XHRjb250YWluZXIuZmluZChcIi5wbHVjay10aHVtYi1kb3duLWxpbmtcIikudGV4dChcIihcIiArICR2b3Rlc0Rvd24gKyBcIilcIik7XHJcblx0XHRcdFx0Y29udGFpbmVyLmZpbmQoXCIucGx1Y2stdGh1bWItdXAtbGlua1wiKS50ZXh0KFwiKFwiICsgJHZvdGVzVXAgKyBcIilcIik7XHJcblx0XHRcdH0pO1xyXG5cclxuICAgICAgICAgICAgcmVmcmVzaEF2YXRhcnNGaXJzdExldmVsKCk7XHJcbiAgICAgICAgICAgIHJlZnJlc2hBdmF0YXJzU2Vjb25kTGV2ZWwoKTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgd2luZG93LlBsdWNrQ29udHJvbGxlciA9IFBsdWNrQ29udHJvbGxlcjtcclxuICAgIFxyXG59KSk7IiwiLyohXG4gKiBEZXRlY3RpenIgdkBWRVJTSU9OXG4gKiBodHRwOi8vYmFyaXNheWRpbm9nbHUuZ2l0aHViLmNvbS9EZXRlY3RpenIvXG4gKlxuICogV3JpdHRlbiBieSBCYXJpcyBBeWRpbm9nbHUgKGh0dHA6Ly9iYXJpcy5heWRpbm9nbHUuaW5mbykgLSBDb3B5cmlnaHQgMjAxMlxuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlXG4gKlxuICogRGF0ZTogQERBVEVcbiAqL1xud2luZG93LkRldGVjdGl6ciA9IChmdW5jdGlvbih3aW5kb3csIG5hdmlnYXRvciwgZG9jdW1lbnQsIHVuZGVmaW5lZCkge1xuXHR2YXIgRGV0ZWN0aXpyID0ge30sXG5cdFx0TW9kZXJuaXpyID0gd2luZG93Lk1vZGVybml6cixcblx0XHRkZXZpY2VUeXBlcyA9IFtcInR2XCIsIFwidGFibGV0XCIsIFwibW9iaWxlXCIsIFwiZGVza3RvcFwiXSxcblx0XHRvcHRpb25zID0ge1xuXHRcdFx0Ly8gb3B0aW9uIGZvciBlbmFibGluZyBIVE1MIGNsYXNzZXMgb2YgYWxsIGZlYXR1cmVzIChub3Qgb25seSB0aGUgdHJ1ZSBmZWF0dXJlcykgdG8gYmUgYWRkZWRcblx0XHRcdGFkZEFsbEZlYXR1cmVzQXNDbGFzczogZmFsc2UsXG5cdFx0XHQvLyBvcHRpb24gZm9yIGVuYWJsaW5nIGRldGVjdGlvbiBvZiBkZXZpY2Vcblx0XHRcdGRldGVjdERldmljZTogdHJ1ZSxcblx0XHRcdC8vIG9wdGlvbiBmb3IgZW5hYmxpbmcgZGV0ZWN0aW9uIG9mIGRldmljZSBtb2RlbFxuXHRcdFx0ZGV0ZWN0RGV2aWNlTW9kZWw6IHRydWUsXG5cdFx0XHQvLyBvcHRpb24gZm9yIGVuYWJsaW5nIGRldGVjdGlvbiBvZiBzY3JlZW4gc2l6ZVxuXHRcdFx0ZGV0ZWN0U2NyZWVuOiB0cnVlLFxuXHRcdFx0Ly8gb3B0aW9uIGZvciBlbmFibGluZyBkZXRlY3Rpb24gb2Ygb3BlcmF0aW5nIHN5c3RlbSB0eXBlIGFuZCB2ZXJzaW9uXG5cdFx0XHRkZXRlY3RPUzogdHJ1ZSxcblx0XHRcdC8vIG9wdGlvbiBmb3IgZW5hYmxpbmcgZGV0ZWN0aW9uIG9mIGJyb3dzZXIgdHlwZSBhbmQgdmVyc2lvblxuXHRcdFx0ZGV0ZWN0QnJvd3NlcjogdHJ1ZSxcblx0XHRcdC8vIG9wdGlvbiBmb3IgZW5hYmxpbmcgZGV0ZWN0aW9uIG9mIGNvbW1vbiBicm93c2VyIHBsdWdpbnNcblx0XHRcdGRldGVjdFBsdWdpbnM6IHRydWVcblx0XHR9LFxuXHRcdHBsdWdpbnMyZGV0ZWN0ID0gW3tcblx0XHRcdG5hbWU6IFwiYWRvYmVyZWFkZXJcIixcblx0XHRcdHN1YnN0cnM6IFtcIkFkb2JlXCIsIFwiQWNyb2JhdFwiXSxcblx0XHRcdC8vIEFjcm9QREYuUERGIGlzIHVzZWQgYnkgdmVyc2lvbiA3IGFuZCBsYXRlclxuXHRcdFx0Ly8gUERGLlBkZkN0cmwgaXMgdXNlZCBieSB2ZXJzaW9uIDYgYW5kIGVhcmxpZXJcblx0XHRcdHByb2dJZHM6IFtcIkFjcm9QREYuUERGXCIsIFwiUERGLlBERkN0cmwuNVwiXVxuXHRcdH0sIHtcblx0XHRcdG5hbWU6IFwiZmxhc2hcIixcblx0XHRcdHN1YnN0cnM6IFtcIlNob2Nrd2F2ZSBGbGFzaFwiXSxcblx0XHRcdHByb2dJZHM6IFtcIlNob2Nrd2F2ZUZsYXNoLlNob2Nrd2F2ZUZsYXNoLjFcIl1cblx0XHR9LCB7XG5cdFx0XHRuYW1lOiBcIndtcGxheWVyXCIsXG5cdFx0XHRzdWJzdHJzOiBbXCJXaW5kb3dzIE1lZGlhXCJdLFxuXHRcdFx0cHJvZ0lkczogW1wid21wbGF5ZXIub2N4XCJdXG5cdFx0fSwge1xuXHRcdFx0bmFtZTogXCJzaWx2ZXJsaWdodFwiLFxuXHRcdFx0c3Vic3RyczogW1wiU2lsdmVybGlnaHRcIl0sXG5cdFx0XHRwcm9nSWRzOiBbXCJBZ0NvbnRyb2wuQWdDb250cm9sXCJdXG5cdFx0fSwge1xuXHRcdFx0bmFtZTogXCJxdWlja3RpbWVcIixcblx0XHRcdHN1YnN0cnM6IFtcIlF1aWNrVGltZVwiXSxcblx0XHRcdHByb2dJZHM6IFtcIlF1aWNrVGltZS5RdWlja1RpbWVcIl1cblx0XHR9XSxcblx0XHRyY2xhc3MgPSAvW1xcdFxcclxcbl0vZyxcblx0XHRkb2NFbGVtZW50ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LFxuXHRcdHJlc2l6ZVRpbWVvdXRJZCxcblx0XHRvbGRPcmllbnRhdGlvbjtcblxuXHQvLyBDcmVhdGUgR2xvYmFsIFwiZXh0ZW5kXCIgbWV0aG9kLCBzbyBEZXRlY3RpenIgZG9lcyBub3QgbmVlZCBqUXVlcnkuZXh0ZW5kXG5cdGZ1bmN0aW9uIGV4dGVuZChvYmosIGV4dE9iaikge1xuXHRcdHZhciBhLCBiLCBpO1xuXHRcdGlmIChhcmd1bWVudHMubGVuZ3RoID4gMikge1xuXHRcdFx0Zm9yIChhID0gMSwgYiA9IGFyZ3VtZW50cy5sZW5ndGg7IGEgPCBiOyBhICs9IDEpIHtcblx0XHRcdFx0ZXh0ZW5kKG9iaiwgYXJndW1lbnRzW2FdKTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0Zm9yIChpIGluIGV4dE9iaikge1xuXHRcdFx0XHRpZiAoZXh0T2JqLmhhc093blByb3BlcnR5KGkpKSB7XG5cdFx0XHRcdFx0b2JqW2ldID0gZXh0T2JqW2ldO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiBvYmo7XG5cdH1cblxuXHQvLyBzaW1wbGlmaWVkIGFuZCBsb2NhbGl6ZWQgaW5kZXhPZiBtZXRob2QgYXMgb25lIHBhcmFtZXRlciBmaXhlZCBhcyB1c2VyYWdlbnRcblx0ZnVuY3Rpb24gaXMoa2V5KSB7XG5cdFx0cmV0dXJuIERldGVjdGl6ci5icm93c2VyLnVzZXJBZ2VudC5pbmRleE9mKGtleSkgPiAtMTtcblx0fVxuXG5cdC8vIHNpbXBsaWZpZWQgYW5kIGxvY2FsaXplZCByZWdleCB0ZXN0IG1ldGhvZCBhcyBvbmUgcGFyYW1ldGVyIGZpeGVkIGFzIHVzZXJhZ2VudFxuXHRmdW5jdGlvbiB0ZXN0KHJlZ2V4KSB7XG5cdFx0cmV0dXJuIHJlZ2V4LnRlc3QoRGV0ZWN0aXpyLmJyb3dzZXIudXNlckFnZW50KTtcblx0fVxuXG5cdC8vIHNpbXBsaWZpZWQgYW5kIGxvY2FsaXplZCByZWdleCBleGVjIG1ldGhvZCBhcyBvbmUgcGFyYW1ldGVyIGZpeGVkIGFzIHVzZXJhZ2VudFxuXHRmdW5jdGlvbiBleGVjKHJlZ2V4KSB7XG5cdFx0cmV0dXJuIHJlZ2V4LmV4ZWMoRGV0ZWN0aXpyLmJyb3dzZXIudXNlckFnZW50KTtcblx0fVxuXG5cdC8vIGxvY2FsaXplZCBzdHJpbmcgdHJpbSBtZXRob2Rcblx0ZnVuY3Rpb24gdHJpbSh2YWx1ZSkge1xuXHRcdHJldHVybiB2YWx1ZS5yZXBsYWNlKC9eXFxzK3xcXHMrJC9nLCBcIlwiKTtcblx0fVxuXG5cdC8vIGNvbnZlcnQgc3RyaW5nIHRvIGNhbWVsY2FzZVxuXHRmdW5jdGlvbiB0b0NhbWVsKHN0cmluZykge1xuXHRcdGlmIChzdHJpbmcgPT09IG51bGwgfHwgc3RyaW5nID09PSB1bmRlZmluZWQpIHtcblx0XHRcdHJldHVybiBcIlwiO1xuXHRcdH1cblx0XHRyZXR1cm4gU3RyaW5nKHN0cmluZykucmVwbGFjZSgvKChcXHN8XFwtfFxcLikrW2EtejAtOV0pL2csIGZ1bmN0aW9uKCQxKSB7XG5cdFx0XHRyZXR1cm4gJDEudG9VcHBlckNhc2UoKS5yZXBsYWNlKC8oXFxzfFxcLXxcXC4pL2csIFwiXCIpO1xuXHRcdH0pO1xuXHR9XG5cblx0Ly8gcmVtb3ZlQ2xhc3MgZnVuY3Rpb24gaW5zcGlyZWQgZnJvbSBqUXVlcnkucmVtb3ZlQ2xhc3Ncblx0ZnVuY3Rpb24gcmVtb3ZlQ2xhc3MoZWxlbWVudCwgdmFsdWUpIHtcblx0XHR2YXIgY2xhc3MycmVtb3ZlID0gdmFsdWUgfHwgXCJcIixcblx0XHRcdGN1ciA9IGVsZW1lbnQubm9kZVR5cGUgPT09IDEgJiYgKGVsZW1lbnQuY2xhc3NOYW1lID8gKFwiIFwiICsgZWxlbWVudC5jbGFzc05hbWUgKyBcIiBcIikucmVwbGFjZShyY2xhc3MsIFwiIFwiKSA6IFwiXCIpO1xuXHRcdGlmIChjdXIpIHtcblx0XHRcdHdoaWxlIChjdXIuaW5kZXhPZihcIiBcIiArIGNsYXNzMnJlbW92ZSArIFwiIFwiKSA+PSAwKSB7XG5cdFx0XHRcdGN1ciA9IGN1ci5yZXBsYWNlKFwiIFwiICsgY2xhc3MycmVtb3ZlICsgXCIgXCIsIFwiIFwiKTtcblx0XHRcdH1cblx0XHRcdGVsZW1lbnQuY2xhc3NOYW1lID0gdmFsdWUgPyB0cmltKGN1cikgOiBcIlwiO1xuXHRcdH1cblx0fVxuXG5cdC8vIGFkZCB2ZXJzaW9uIHRlc3QgdG8gTW9kZXJuaXpyXG5cdGZ1bmN0aW9uIGFkZFZlcnNpb25UZXN0KHZlcnNpb24sIG1ham9yLCBtaW5vcikge1xuXHRcdGlmICghIXZlcnNpb24pIHtcblx0XHRcdHZlcnNpb24gPSB0b0NhbWVsKHZlcnNpb24pO1xuXHRcdFx0aWYgKCEhbWFqb3IpIHtcblx0XHRcdFx0bWFqb3IgPSB0b0NhbWVsKG1ham9yKTtcblx0XHRcdFx0YWRkQ29uZGl0aW9uYWxUZXN0KHZlcnNpb24gKyBtYWpvciwgdHJ1ZSk7XG5cdFx0XHRcdGlmICghIW1pbm9yKSB7XG5cdFx0XHRcdFx0YWRkQ29uZGl0aW9uYWxUZXN0KHZlcnNpb24gKyBtYWpvciArIFwiX1wiICsgbWlub3IsIHRydWUpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Ly8gYWRkIHRlc3QgdG8gTW9kZXJuaXpyIGJhc2VkIG9uIGEgY29uZGl0aW9uXG5cdGZ1bmN0aW9uIGFkZENvbmRpdGlvbmFsVGVzdChmZWF0dXJlLCB0ZXN0KSB7XG5cdFx0aWYgKCEhZmVhdHVyZSAmJiAhIU1vZGVybml6cikge1xuXHRcdFx0aWYgKG9wdGlvbnMuYWRkQWxsRmVhdHVyZXNBc0NsYXNzKSB7XG5cdFx0XHRcdE1vZGVybml6ci5hZGRUZXN0KGZlYXR1cmUsIHRlc3QpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGVzdCA9IHR5cGVvZiB0ZXN0ID09PSBcImZ1bmN0aW9uXCIgPyB0ZXN0KCkgOiB0ZXN0O1xuXHRcdFx0XHRpZiAodGVzdCkge1xuXHRcdFx0XHRcdE1vZGVybml6ci5hZGRUZXN0KGZlYXR1cmUsIHRydWUpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGRlbGV0ZSBNb2Rlcm5penJbZmVhdHVyZV07XG5cdFx0XHRcdFx0cmVtb3ZlQ2xhc3MoZG9jRWxlbWVudCwgZmVhdHVyZSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvLyBzZXQgdmVyc2lvbiBiYXNlZCBvbiB2ZXJzaW9uRnVsbFxuXHRmdW5jdGlvbiBzZXRWZXJzaW9uKHZlcnNpb25UeXBlLCB2ZXJzaW9uRnVsbCkge1xuXHRcdHZlcnNpb25UeXBlLnZlcnNpb24gPSB2ZXJzaW9uRnVsbDtcblx0XHR2YXIgdmVyc2lvbkFycmF5ID0gdmVyc2lvbkZ1bGwuc3BsaXQoXCIuXCIpO1xuXHRcdGlmICh2ZXJzaW9uQXJyYXkubGVuZ3RoID4gMCkge1xuXHRcdFx0dmVyc2lvbkFycmF5ID0gdmVyc2lvbkFycmF5LnJldmVyc2UoKTtcblx0XHRcdHZlcnNpb25UeXBlLm1ham9yID0gdmVyc2lvbkFycmF5LnBvcCgpO1xuXHRcdFx0aWYgKHZlcnNpb25BcnJheS5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdHZlcnNpb25UeXBlLm1pbm9yID0gdmVyc2lvbkFycmF5LnBvcCgpO1xuXHRcdFx0XHRpZiAodmVyc2lvbkFycmF5Lmxlbmd0aCA+IDApIHtcblx0XHRcdFx0XHR2ZXJzaW9uQXJyYXkgPSB2ZXJzaW9uQXJyYXkucmV2ZXJzZSgpO1xuXHRcdFx0XHRcdHZlcnNpb25UeXBlLnBhdGNoID0gdmVyc2lvbkFycmF5LmpvaW4oXCIuXCIpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHZlcnNpb25UeXBlLnBhdGNoID0gXCIwXCI7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHZlcnNpb25UeXBlLm1pbm9yID0gXCIwXCI7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdHZlcnNpb25UeXBlLm1ham9yID0gXCIwXCI7XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gY2hlY2tPcmllbnRhdGlvbigpIHtcblx0XHQvL3RpbWVvdXQgd3JhcHBlciBwb2ludHMgd2l0aCBkb1Jlc2l6ZUNvZGUgYXMgY2FsbGJhY2tcblx0XHR3aW5kb3cuY2xlYXJUaW1lb3V0KHJlc2l6ZVRpbWVvdXRJZCk7XG5cdFx0cmVzaXplVGltZW91dElkID0gd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0XHRvbGRPcmllbnRhdGlvbiA9IERldGVjdGl6ci5kZXZpY2Uub3JpZW50YXRpb247XG5cdFx0XHQvL3dyYXBwZXIgZm9yIGhlaWdodC93aWR0aCBjaGVja1xuXHRcdFx0aWYgKHdpbmRvdy5pbm5lckhlaWdodCA+IHdpbmRvdy5pbm5lcldpZHRoKSB7XG5cdFx0XHRcdERldGVjdGl6ci5kZXZpY2Uub3JpZW50YXRpb24gPSBcInBvcnRyYWl0XCI7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHREZXRlY3RpenIuZGV2aWNlLm9yaWVudGF0aW9uID0gXCJsYW5kc2NhcGVcIjtcblx0XHRcdH1cblx0XHRcdGFkZENvbmRpdGlvbmFsVGVzdChEZXRlY3RpenIuZGV2aWNlLm9yaWVudGF0aW9uLCB0cnVlKTtcblx0XHRcdGlmIChvbGRPcmllbnRhdGlvbiAhPT0gRGV0ZWN0aXpyLmRldmljZS5vcmllbnRhdGlvbikge1xuXHRcdFx0XHRhZGRDb25kaXRpb25hbFRlc3Qob2xkT3JpZW50YXRpb24sIGZhbHNlKTtcblx0XHRcdH1cblx0XHR9LCAxMCk7XG5cdH1cblxuXHRmdW5jdGlvbiBkZXRlY3RQbHVnaW4oc3Vic3Rycykge1xuXHRcdHZhciBwbHVnaW5zID0gbmF2aWdhdG9yLnBsdWdpbnMsXG5cdFx0XHRwbHVnaW4sIGhheXN0YWNrLCBwbHVnaW5Gb3VuZFRleHQsIGosIGs7XG5cdFx0Zm9yIChqID0gcGx1Z2lucy5sZW5ndGggLSAxOyBqID49IDA7IGotLSkge1xuXHRcdFx0cGx1Z2luID0gcGx1Z2luc1tqXTtcblx0XHRcdGhheXN0YWNrID0gcGx1Z2luLm5hbWUgKyBwbHVnaW4uZGVzY3JpcHRpb247XG5cdFx0XHRwbHVnaW5Gb3VuZFRleHQgPSAwO1xuXHRcdFx0Zm9yIChrID0gc3Vic3Rycy5sZW5ndGg7IGsgPj0gMDsgay0tKSB7XG5cdFx0XHRcdGlmIChoYXlzdGFjay5pbmRleE9mKHN1YnN0cnNba10pICE9PSAtMSkge1xuXHRcdFx0XHRcdHBsdWdpbkZvdW5kVGV4dCArPSAxO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRpZiAocGx1Z2luRm91bmRUZXh0ID09PSBzdWJzdHJzLmxlbmd0aCkge1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0ZnVuY3Rpb24gZGV0ZWN0T2JqZWN0KHByb2dJZHMpIHtcblx0XHR2YXIgajtcblx0XHRmb3IgKGogPSBwcm9nSWRzLmxlbmd0aCAtIDE7IGogPj0gMDsgai0tKSB7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRuZXcgQWN0aXZlWE9iamVjdChwcm9nSWRzW2pdKTtcblx0XHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdFx0Ly8gSWdub3JlXG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdGZ1bmN0aW9uIGRldGVjdChvcHQpIHtcblx0XHR2YXIgaSwgaiwgZGV2aWNlLCBvcywgYnJvd3NlciwgcGx1Z2luMmRldGVjdCwgcGx1Z2luRm91bmQ7XG5cblx0XHRvcHRpb25zID0gZXh0ZW5kKHt9LCBvcHRpb25zLCBvcHQgfHwge30pO1xuXG5cdFx0LyoqIERldmljZSBkZXRlY3Rpb24gKiovXG5cdFx0aWYgKG9wdGlvbnMuZGV0ZWN0RGV2aWNlKSB7XG5cdFx0XHREZXRlY3RpenIuZGV2aWNlID0ge1xuXHRcdFx0XHR0eXBlOiBcIlwiLFxuXHRcdFx0XHRtb2RlbDogXCJcIixcblx0XHRcdFx0b3JpZW50YXRpb246IFwiXCJcblx0XHRcdH07XG5cdFx0XHRkZXZpY2UgPSBEZXRlY3RpenIuZGV2aWNlO1xuXHRcdFx0aWYgKHRlc3QoL2dvb2dsZXR2fHNtYXJ0dHZ8c21hcnQtdHZ8aW50ZXJuZXQudHZ8bmV0Y2FzdHxuZXR0dnxhcHBsZXR2fGJveGVlfGt5bG98cm9rdXxkbG5hZG9jfHJva3V8cG92X3R2fGhiYnR2fGNlXFwtaHRtbC8pKSB7XG5cdFx0XHRcdC8vIENoZWNrIGlmIHVzZXIgYWdlbnQgaXMgYSBzbWFydCB0dlxuXHRcdFx0XHRkZXZpY2UudHlwZSA9IGRldmljZVR5cGVzWzBdO1xuXHRcdFx0XHRkZXZpY2UubW9kZWwgPSBcInNtYXJ0VHZcIjtcblx0XHRcdH0gZWxzZSBpZiAodGVzdCgveGJveHxwbGF5c3RhdGlvbi4zfHdpaS8pKSB7XG5cdFx0XHRcdC8vIENoZWNrIGlmIHVzZXIgYWdlbnQgaXMgYSBnYW1lIGNvbnNvbGVcblx0XHRcdFx0ZGV2aWNlLnR5cGUgPSBkZXZpY2VUeXBlc1swXTtcblx0XHRcdFx0ZGV2aWNlLm1vZGVsID0gXCJnYW1lQ29uc29sZVwiO1xuXHRcdFx0fSBlbHNlIGlmICh0ZXN0KC9pcChhfHJvKWQvKSkge1xuXHRcdFx0XHQvLyBDaGVjayBpZiB1c2VyIGFnZW50IGlzIGEgaVBhZFxuXHRcdFx0XHRkZXZpY2UudHlwZSA9IGRldmljZVR5cGVzWzFdO1xuXHRcdFx0XHRkZXZpY2UubW9kZWwgPSBcImlwYWRcIjtcblx0XHRcdH0gZWxzZSBpZiAoKHRlc3QoL3RhYmxldC8pICYmICF0ZXN0KC9yeC0zNC8pKSB8fCB0ZXN0KC9mb2xpby8pKSB7XG5cdFx0XHRcdC8vIENoZWNrIGlmIHVzZXIgYWdlbnQgaXMgYSBUYWJsZXRcblx0XHRcdFx0ZGV2aWNlLnR5cGUgPSBkZXZpY2VUeXBlc1sxXTtcblx0XHRcdFx0ZGV2aWNlLm1vZGVsID0gU3RyaW5nKGV4ZWMoL3BsYXlib29rLykgfHwgXCJcIik7XG5cdFx0XHR9IGVsc2UgaWYgKHRlc3QoL2xpbnV4LykgJiYgdGVzdCgvYW5kcm9pZC8pICYmICF0ZXN0KC9mZW5uZWN8bW9iaXxodGMubWFnaWN8aHRjWDA2aHR8bmV4dXMub25lfHNjLTAyYnxmb25lLjk0NS8pKSB7XG5cdFx0XHRcdC8vIENoZWNrIGlmIHVzZXIgYWdlbnQgaXMgYW4gQW5kcm9pZCBUYWJsZXRcblx0XHRcdFx0ZGV2aWNlLnR5cGUgPSBkZXZpY2VUeXBlc1sxXTtcblx0XHRcdFx0ZGV2aWNlLm1vZGVsID0gXCJhbmRyb2lkXCI7XG5cdFx0XHR9IGVsc2UgaWYgKHRlc3QoL2tpbmRsZS8pIHx8ICh0ZXN0KC9tYWMub3MvKSAmJiB0ZXN0KC9zaWxrLykpKSB7XG5cdFx0XHRcdC8vIENoZWNrIGlmIHVzZXIgYWdlbnQgaXMgYSBLaW5kbGUgb3IgS2luZGxlIEZpcmVcblx0XHRcdFx0ZGV2aWNlLnR5cGUgPSBkZXZpY2VUeXBlc1sxXTtcblx0XHRcdFx0ZGV2aWNlLm1vZGVsID0gXCJraW5kbGVcIjtcblx0XHRcdH0gZWxzZSBpZiAodGVzdCgvZ3QtcDEwfHNjLTAxY3xzaHctbTE4MHN8c2doLXQ4NDl8c2NoLWk4MDB8c2h3LW0xODBsfHNwaC1wMTAwfHNnaC1pOTg3fHp0MTgwfGh0YyguZmx5ZXJ8XFxfZmx5ZXIpfHNwcmludC5hdHA1MXx2aWV3cGFkN3xwYW5kaWdpdGFsKHNwcm5vdmF8bm92YSl8aWRlb3Muczd8ZGVsbC5zdHJlYWsuN3xhZHZlbnQudmVnYXxhMTAxaXR8YTcwYmh0fG1pZDcwMTV8bmV4dDJ8bm9vay8pIHx8ICh0ZXN0KC9tYjUxMS8pICYmIHRlc3QoL3J1dGVtLykpKSB7XG5cdFx0XHRcdC8vIENoZWNrIGlmIHVzZXIgYWdlbnQgaXMgYSBwcmUgQW5kcm9pZCAzLjAgVGFibGV0XG5cdFx0XHRcdGRldmljZS50eXBlID0gZGV2aWNlVHlwZXNbMV07XG5cdFx0XHRcdGRldmljZS5tb2RlbCA9IFwiYW5kcm9pZFwiO1xuXHRcdFx0fSBlbHNlIGlmICh0ZXN0KC9iYjEwLykpIHtcblx0XHRcdFx0Ly8gQ2hlY2sgaWYgdXNlciBhZ2VudCBpcyBhIEJCMTAgZGV2aWNlXG5cdFx0XHRcdGRldmljZS50eXBlID0gZGV2aWNlVHlwZXNbMV07XG5cdFx0XHRcdGRldmljZS5tb2RlbCA9IFwiYmxhY2tiZXJyeVwiO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gQ2hlY2sgaWYgdXNlciBhZ2VudCBpcyBvbmUgb2YgY29tbW9uIG1vYmlsZSB0eXBlc1xuXHRcdFx0XHRkZXZpY2UubW9kZWwgPSBleGVjKC9pcGhvbmV8aXBvZHxhbmRyb2lkfGJsYWNrYmVycnl8b3BlcmEgbWluaXxvcGVyYSBtb2JpfHNreWZpcmV8bWFlbW98d2luZG93cyBwaG9uZXxwYWxtfGllbW9iaWxlfHN5bWJpYW58c3ltYmlhbm9zfGZlbm5lY3xqMm1lLyk7XG5cdFx0XHRcdGlmIChkZXZpY2UubW9kZWwgIT09IG51bGwpIHtcblx0XHRcdFx0XHRkZXZpY2UudHlwZSA9IGRldmljZVR5cGVzWzJdO1xuXHRcdFx0XHRcdGRldmljZS5tb2RlbCA9IFN0cmluZyhkZXZpY2UubW9kZWwpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGRldmljZS5tb2RlbCA9IFwiXCI7XG5cdFx0XHRcdFx0aWYgKHRlc3QoL2JvbHR8ZmVubmVjfGlyaXN8bWFlbW98bWluaW1vfG1vYml8bW93c2VyfG5ldGZyb250fG5vdmFycmF8cHJpc218cngtMzR8c2t5ZmlyZXx0ZWFyfHh2Njg3NXx4djY5NzV8Z29vZ2xlLndpcmVsZXNzLnRyYW5zY29kZXIvKSkge1xuXHRcdFx0XHRcdFx0Ly8gQ2hlY2sgaWYgdXNlciBhZ2VudCBpcyB1bmlxdWUgTW9iaWxlIFVzZXIgQWdlbnRcblx0XHRcdFx0XHRcdGRldmljZS50eXBlID0gZGV2aWNlVHlwZXNbMl07XG5cdFx0XHRcdFx0fSBlbHNlIGlmICh0ZXN0KC9vcGVyYS8pICYmIHRlc3QoL3dpbmRvd3MubnQuNS8pICYmIHRlc3QoL2h0Y3x4ZGF8bWluaXx2YXJpb3xzYW1zdW5nXFwtZ3RcXC1pODAwMHxzYW1zdW5nXFwtc2doXFwtaTkvKSkge1xuXHRcdFx0XHRcdFx0Ly8gQ2hlY2sgaWYgdXNlciBhZ2VudCBpcyBhbiBvZGQgT3BlcmEgVXNlciBBZ2VudCAtIGh0dHA6Ly9nb28uZ2wvbks5MEtcblx0XHRcdFx0XHRcdGRldmljZS50eXBlID0gZGV2aWNlVHlwZXNbMl07XG5cdFx0XHRcdFx0fSBlbHNlIGlmICgodGVzdCgvd2luZG93cy4obnR8eHB8bWV8OSkvKSAmJiAhdGVzdCgvcGhvbmUvKSkgfHwgdGVzdCgvd2luKDl8Ljl8bnQpLykgfHwgdGVzdCgvXFwod2luZG93cyA4XFwpLykpIHtcblx0XHRcdFx0XHRcdC8vIENoZWNrIGlmIHVzZXIgYWdlbnQgaXMgV2luZG93cyBEZXNrdG9wLCBcIihXaW5kb3dzIDgpXCIgQ2hyb21lIGV4dHJhIGV4Y2VwdGlvblxuXHRcdFx0XHRcdFx0ZGV2aWNlLnR5cGUgPSBkZXZpY2VUeXBlc1szXTtcblx0XHRcdFx0XHR9IGVsc2UgaWYgKHRlc3QoL21hY2ludG9zaHxwb3dlcnBjLykgJiYgIXRlc3QoL3NpbGsvKSkge1xuXHRcdFx0XHRcdFx0Ly8gQ2hlY2sgaWYgYWdlbnQgaXMgTWFjIERlc2t0b3Bcblx0XHRcdFx0XHRcdGRldmljZS50eXBlID0gZGV2aWNlVHlwZXNbM107XG5cdFx0XHRcdFx0XHRkZXZpY2UubW9kZWwgPSBcIm1hY1wiO1xuXHRcdFx0XHRcdH0gZWxzZSBpZiAodGVzdCgvbGludXgvKSAmJiB0ZXN0KC94MTEvKSkge1xuXHRcdFx0XHRcdFx0Ly8gQ2hlY2sgaWYgdXNlciBhZ2VudCBpcyBhIExpbnV4IERlc2t0b3Bcblx0XHRcdFx0XHRcdGRldmljZS50eXBlID0gZGV2aWNlVHlwZXNbM107XG5cdFx0XHRcdFx0fSBlbHNlIGlmICh0ZXN0KC9zb2xhcmlzfHN1bm9zfGJzZC8pKSB7XG5cdFx0XHRcdFx0XHQvLyBDaGVjayBpZiB1c2VyIGFnZW50IGlzIGEgU29sYXJpcywgU3VuT1MsIEJTRCBEZXNrdG9wXG5cdFx0XHRcdFx0XHRkZXZpY2UudHlwZSA9IGRldmljZVR5cGVzWzNdO1xuXHRcdFx0XHRcdH0gZWxzZSBpZiAodGVzdCgvY3Jvcy8pKSB7XG5cdFx0XHRcdFx0XHQvLyBDaGVjayBpZiB1c2VyIGFnZW50IGlzIGEgQ2hyb21lYm9va1xuXHRcdFx0XHRcdFx0ZGV2aWNlLnR5cGUgPSBkZXZpY2VUeXBlc1szXTtcblx0XHRcdFx0XHR9IGVsc2UgaWYgKHRlc3QoL2JvdHxjcmF3bGVyfHNwaWRlcnx5YWhvb3xpYV9hcmNoaXZlcnxjb3ZhcmlvLWlkc3xmaW5kbGlua3N8ZGF0YXBhcmtzZWFyY2h8bGFyYmlufG1lZGlhcGFydG5lcnMtZ29vZ2xlfG5nLXNlYXJjaHxzbmFwcHl8dGVvbWF8amVldmVzfHRpbmV5ZS8pICYmICF0ZXN0KC9tb2JpbGUvKSkge1xuXHRcdFx0XHRcdFx0Ly8gQ2hlY2sgaWYgdXNlciBhZ2VudCBpcyBhIERlc2t0b3AgQk9UL0NyYXdsZXIvU3BpZGVyXG5cdFx0XHRcdFx0XHRkZXZpY2UudHlwZSA9IGRldmljZVR5cGVzWzNdO1xuXHRcdFx0XHRcdFx0ZGV2aWNlLm1vZGVsID0gXCJjcmF3bGVyXCI7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdC8vIE90aGVyd2lzZSBhc3N1bWUgaXQgaXMgYSBNb2JpbGUgRGV2aWNlXG5cdFx0XHRcdFx0XHRkZXZpY2UudHlwZSA9IGRldmljZVR5cGVzWzJdO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0Zm9yIChpID0gMCwgaiA9IGRldmljZVR5cGVzLmxlbmd0aDsgaSA8IGo7IGkgKz0gMSkge1xuXHRcdFx0XHRhZGRDb25kaXRpb25hbFRlc3QoZGV2aWNlVHlwZXNbaV0sIChkZXZpY2UudHlwZSA9PT0gZGV2aWNlVHlwZXNbaV0pKTtcblx0XHRcdH1cblx0XHRcdGlmIChvcHRpb25zLmRldGVjdERldmljZU1vZGVsKSB7XG5cdFx0XHRcdGFkZENvbmRpdGlvbmFsVGVzdCh0b0NhbWVsKGRldmljZS5tb2RlbCksIHRydWUpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8qKiBTY3JlZW4gZGV0ZWN0aW9uICoqL1xuXHRcdGlmIChvcHRpb25zLmRldGVjdFNjcmVlbikge1xuXHRcdFx0ZGV2aWNlLnNjcmVlbiA9IHt9O1xuXHRcdFx0aWYgKCEhTW9kZXJuaXpyICYmICEhTW9kZXJuaXpyLm1xKSB7XG5cdFx0XHRcdGlmIChNb2Rlcm5penIubXEoXCJvbmx5IHNjcmVlbiBhbmQgKG1heC13aWR0aDogMjQwcHgpXCIpKSB7XG5cdFx0XHRcdFx0ZGV2aWNlLnNjcmVlbi5zaXplID0gXCJ2ZXJ5VmVyeVNtYWxsXCI7XG5cdFx0XHRcdFx0YWRkQ29uZGl0aW9uYWxUZXN0KFwidmVyeVZlcnlTbWFsbFNjcmVlblwiLCB0cnVlKTtcblx0XHRcdFx0fSBlbHNlIGlmIChNb2Rlcm5penIubXEoXCJvbmx5IHNjcmVlbiBhbmQgKG1heC13aWR0aDogMzIwcHgpXCIpKSB7XG5cdFx0XHRcdFx0ZGV2aWNlLnNjcmVlbi5zaXplID0gXCJ2ZXJ5U21hbGxcIjtcblx0XHRcdFx0XHRhZGRDb25kaXRpb25hbFRlc3QoXCJ2ZXJ5U21hbGxTY3JlZW5cIiwgdHJ1ZSk7XG5cdFx0XHRcdH0gZWxzZSBpZiAoTW9kZXJuaXpyLm1xKFwib25seSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDQ4MHB4KVwiKSkge1xuXHRcdFx0XHRcdGRldmljZS5zY3JlZW4uc2l6ZSA9IFwic21hbGxcIjtcblx0XHRcdFx0XHRhZGRDb25kaXRpb25hbFRlc3QoXCJzbWFsbFNjcmVlblwiLCB0cnVlKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoZGV2aWNlLnR5cGUgPT09IGRldmljZVR5cGVzWzFdIHx8IGRldmljZS50eXBlID09PSBkZXZpY2VUeXBlc1syXSkge1xuXHRcdFx0XHRcdGlmIChNb2Rlcm5penIubXEoXCJvbmx5IHNjcmVlbiBhbmQgKC1tb3otbWluLWRldmljZS1waXhlbC1yYXRpbzogMS4zKSwgb25seSBzY3JlZW4gYW5kICgtby1taW4tZGV2aWNlLXBpeGVsLXJhdGlvOiAyLjYvMiksIG9ubHkgc2NyZWVuIGFuZCAoLXdlYmtpdC1taW4tZGV2aWNlLXBpeGVsLXJhdGlvOiAxLjMpLCBvbmx5IHNjcmVlbiAgYW5kIChtaW4tZGV2aWNlLXBpeGVsLXJhdGlvOiAxLjMpLCBvbmx5IHNjcmVlbiBhbmQgKG1pbi1yZXNvbHV0aW9uOiAxLjNkcHB4KVwiKSkge1xuXHRcdFx0XHRcdFx0ZGV2aWNlLnNjcmVlbi5yZXNvbHV0aW9uID0gXCJoaWdoXCI7XG5cdFx0XHRcdFx0XHRhZGRDb25kaXRpb25hbFRlc3QoXCJoaWdocmVzb2x1dGlvblwiLCB0cnVlKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGlmIChkZXZpY2UudHlwZSA9PT0gZGV2aWNlVHlwZXNbMV0gfHwgZGV2aWNlLnR5cGUgPT09IGRldmljZVR5cGVzWzJdKSB7XG5cdFx0XHRcdHdpbmRvdy5vbnJlc2l6ZSA9IGZ1bmN0aW9uKGV2ZW50KSB7XG5cdFx0XHRcdFx0Y2hlY2tPcmllbnRhdGlvbihldmVudCk7XG5cdFx0XHRcdH07XG5cdFx0XHRcdGNoZWNrT3JpZW50YXRpb24oKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGRldmljZS5vcmllbnRhdGlvbiA9IFwibGFuZHNjYXBlXCI7XG5cdFx0XHRcdGFkZENvbmRpdGlvbmFsVGVzdChkZXZpY2Uub3JpZW50YXRpb24sIHRydWUpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8qKiBPUyBkZXRlY3Rpb24gKiovXG5cdFx0aWYgKG9wdGlvbnMuZGV0ZWN0T1MpIHtcblx0XHRcdERldGVjdGl6ci5vcyA9IHt9O1xuXHRcdFx0b3MgPSBEZXRlY3RpenIub3M7XG5cdFx0XHRpZiAoZGV2aWNlLm1vZGVsICE9PSBcIlwiKSB7XG5cdFx0XHRcdGlmIChkZXZpY2UubW9kZWwgPT09IFwiaXBhZFwiIHx8IGRldmljZS5tb2RlbCA9PT0gXCJpcGhvbmVcIiB8fCBkZXZpY2UubW9kZWwgPT09IFwiaXBvZFwiKSB7XG5cdFx0XHRcdFx0b3MubmFtZSA9IFwiaW9zXCI7XG5cdFx0XHRcdFx0c2V0VmVyc2lvbihvcywgKHRlc3QoL29zXFxzKFtcXGRfXSspLykgPyBSZWdFeHAuJDEgOiBcIlwiKS5yZXBsYWNlKC9fL2csIFwiLlwiKSk7XG5cdFx0XHRcdH0gZWxzZSBpZiAoZGV2aWNlLm1vZGVsID09PSBcImFuZHJvaWRcIikge1xuXHRcdFx0XHRcdG9zLm5hbWUgPSBcImFuZHJvaWRcIjtcblx0XHRcdFx0XHRzZXRWZXJzaW9uKG9zLCAodGVzdCgvYW5kcm9pZFxccyhbXFxkXFwuXSspLykgPyBSZWdFeHAuJDEgOiBcIlwiKSk7XG5cdFx0XHRcdH0gZWxzZSBpZiAoZGV2aWNlLm1vZGVsID09PSBcImJsYWNrYmVycnlcIikge1xuXHRcdFx0XHRcdG9zLm5hbWUgPSBcImJsYWNrYmVycnlcIjtcblx0XHRcdFx0XHRzZXRWZXJzaW9uKG9zLCAodGVzdCgvdmVyc2lvblxcLyhbXlxcc10rKS8pID8gUmVnRXhwLiQxIDogXCJcIikpO1xuXHRcdFx0XHR9IGVsc2UgaWYgKGRldmljZS5tb2RlbCA9PT0gXCJwbGF5Ym9va1wiKSB7XG5cdFx0XHRcdFx0b3MubmFtZSA9IFwiYmxhY2tiZXJyeVwiO1xuXHRcdFx0XHRcdHNldFZlcnNpb24ob3MsICh0ZXN0KC9vcyAoW15cXHNdKykvKSA/IFJlZ0V4cC4kMS5yZXBsYWNlKFwiO1wiLCBcIlwiKSA6IFwiXCIpKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0aWYgKCFvcy5uYW1lKSB7XG5cdFx0XHRcdGlmIChpcyhcIndpblwiKSB8fCBpcyhcIjE2Yml0XCIpKSB7XG5cdFx0XHRcdFx0b3MubmFtZSA9IFwid2luZG93c1wiO1xuXHRcdFx0XHRcdGlmIChpcyhcIndpbmRvd3MgbnQgNi4zXCIpKSB7XG5cdFx0XHRcdFx0XHRzZXRWZXJzaW9uKG9zLCBcIjguMVwiKTtcblx0XHRcdFx0XHR9IGVsc2UgaWYgKGlzKFwid2luZG93cyBudCA2LjJcIikgfHwgdGVzdCgvXFwod2luZG93cyA4XFwpLykpIHsgLy93aW5kb3dzIDggY2hyb21lIG1hYyBmaXhcblx0XHRcdFx0XHRcdHNldFZlcnNpb24ob3MsIFwiOFwiKTtcblx0XHRcdFx0XHR9IGVsc2UgaWYgKGlzKFwid2luZG93cyBudCA2LjFcIikpIHtcblx0XHRcdFx0XHRcdHNldFZlcnNpb24ob3MsIFwiN1wiKTtcblx0XHRcdFx0XHR9IGVsc2UgaWYgKGlzKFwid2luZG93cyBudCA2LjBcIikpIHtcblx0XHRcdFx0XHRcdHNldFZlcnNpb24ob3MsIFwidmlzdGFcIik7XG5cdFx0XHRcdFx0fSBlbHNlIGlmIChpcyhcIndpbmRvd3MgbnQgNS4yXCIpIHx8IGlzKFwid2luZG93cyBudCA1LjFcIikgfHwgaXMoXCJ3aW5kb3dzIHhwXCIpKSB7XG5cdFx0XHRcdFx0XHRzZXRWZXJzaW9uKG9zLCBcInhwXCIpO1xuXHRcdFx0XHRcdH0gZWxzZSBpZiAoaXMoXCJ3aW5kb3dzIG50IDUuMFwiKSB8fCBpcyhcIndpbmRvd3MgMjAwMFwiKSkge1xuXHRcdFx0XHRcdFx0c2V0VmVyc2lvbihvcywgXCIya1wiKTtcblx0XHRcdFx0XHR9IGVsc2UgaWYgKGlzKFwid2lubnRcIikgfHwgaXMoXCJ3aW5kb3dzIG50XCIpKSB7XG5cdFx0XHRcdFx0XHRzZXRWZXJzaW9uKG9zLCBcIm50XCIpO1xuXHRcdFx0XHRcdH0gZWxzZSBpZiAoaXMoXCJ3aW45OFwiKSB8fCBpcyhcIndpbmRvd3MgOThcIikpIHtcblx0XHRcdFx0XHRcdHNldFZlcnNpb24ob3MsIFwiOThcIik7XG5cdFx0XHRcdFx0fSBlbHNlIGlmIChpcyhcIndpbjk1XCIpIHx8IGlzKFwid2luZG93cyA5NVwiKSkge1xuXHRcdFx0XHRcdFx0c2V0VmVyc2lvbihvcywgXCI5NVwiKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSBpZiAoaXMoXCJtYWNcIikgfHwgaXMoXCJkYXJ3aW5cIikpIHtcblx0XHRcdFx0XHRvcy5uYW1lID0gXCJtYWMgb3NcIjtcblx0XHRcdFx0XHRpZiAoaXMoXCI2OGtcIikgfHwgaXMoXCI2ODAwMFwiKSkge1xuXHRcdFx0XHRcdFx0c2V0VmVyc2lvbihvcywgXCI2OGtcIik7XG5cdFx0XHRcdFx0fSBlbHNlIGlmIChpcyhcInBwY1wiKSB8fCBpcyhcInBvd2VycGNcIikpIHtcblx0XHRcdFx0XHRcdHNldFZlcnNpb24ob3MsIFwicHBjXCIpO1xuXHRcdFx0XHRcdH0gZWxzZSBpZiAoaXMoXCJvcyB4XCIpKSB7XG5cdFx0XHRcdFx0XHRzZXRWZXJzaW9uKG9zLCAodGVzdCgvb3NcXHN4XFxzKFtcXGRfXSspLykgPyBSZWdFeHAuJDEgOiBcIm9zIHhcIikucmVwbGFjZSgvXy9nLCBcIi5cIikpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIGlmIChpcyhcIndlYnR2XCIpKSB7XG5cdFx0XHRcdFx0b3MubmFtZSA9IFwid2VidHZcIjtcblx0XHRcdFx0fSBlbHNlIGlmIChpcyhcIngxMVwiKSB8fCBpcyhcImludXhcIikpIHtcblx0XHRcdFx0XHRvcy5uYW1lID0gXCJsaW51eFwiO1xuXHRcdFx0XHR9IGVsc2UgaWYgKGlzKFwic3Vub3NcIikpIHtcblx0XHRcdFx0XHRvcy5uYW1lID0gXCJzdW5cIjtcblx0XHRcdFx0fSBlbHNlIGlmIChpcyhcImlyaXhcIikpIHtcblx0XHRcdFx0XHRvcy5uYW1lID0gXCJpcml4XCI7XG5cdFx0XHRcdH0gZWxzZSBpZiAoaXMoXCJmcmVlYnNkXCIpKSB7XG5cdFx0XHRcdFx0b3MubmFtZSA9IFwiZnJlZWJzZFwiO1xuXHRcdFx0XHR9IGVsc2UgaWYgKGlzKFwiYnNkXCIpKSB7XG5cdFx0XHRcdFx0b3MubmFtZSA9IFwiYnNkXCI7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGlmICghIW9zLm5hbWUpIHtcblx0XHRcdFx0YWRkQ29uZGl0aW9uYWxUZXN0KG9zLm5hbWUsIHRydWUpO1xuXHRcdFx0XHRpZiAoISFvcy5tYWpvcikge1xuXHRcdFx0XHRcdGFkZFZlcnNpb25UZXN0KG9zLm5hbWUsIG9zLm1ham9yKTtcblx0XHRcdFx0XHRpZiAoISFvcy5taW5vcikge1xuXHRcdFx0XHRcdFx0YWRkVmVyc2lvblRlc3Qob3MubmFtZSwgb3MubWFqb3IsIG9zLm1pbm9yKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGlmICh0ZXN0KC9cXHN4NjR8XFxzeDg2fFxcc3dpbjY0fFxcc3dvdzY0fFxcc2FtZDY0LykpIHtcblx0XHRcdFx0b3MuYWRkcmVzc1JlZ2lzdGVyU2l6ZSA9IFwiNjRiaXRcIjtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdG9zLmFkZHJlc3NSZWdpc3RlclNpemUgPSBcIjMyYml0XCI7XG5cdFx0XHR9XG5cdFx0XHRhZGRDb25kaXRpb25hbFRlc3Qob3MuYWRkcmVzc1JlZ2lzdGVyU2l6ZSwgdHJ1ZSk7XG5cdFx0fVxuXG5cdFx0LyoqIEJyb3dzZXIgZGV0ZWN0aW9uICoqL1xuXHRcdGlmIChvcHRpb25zLmRldGVjdEJyb3dzZXIpIHtcblx0XHRcdGJyb3dzZXIgPSBEZXRlY3RpenIuYnJvd3Nlcjtcblx0XHRcdGlmICghdGVzdCgvb3BlcmF8d2VidHYvKSAmJiAodGVzdCgvbXNpZVxccyhbXFxkXFx3XFwuXSspLykgfHwgaXMoXCJ0cmlkZW50XCIpKSkge1xuXHRcdFx0XHRicm93c2VyLmVuZ2luZSA9IFwidHJpZGVudFwiO1xuXHRcdFx0XHRicm93c2VyLm5hbWUgPSBcImllXCI7XG5cdFx0XHRcdGlmICghd2luZG93LmFkZEV2ZW50TGlzdGVuZXIgJiYgZG9jdW1lbnQuZG9jdW1lbnRNb2RlICYmIGRvY3VtZW50LmRvY3VtZW50TW9kZSA9PT0gNykge1xuXHRcdFx0XHRcdHNldFZlcnNpb24oYnJvd3NlciwgXCI4LmNvbXBhdFwiKTtcblx0XHRcdFx0fSBlbHNlIGlmICh0ZXN0KC90cmlkZW50LipydlsgOl0oXFxkKylcXC4vKSkge1xuXHRcdFx0XHRcdHNldFZlcnNpb24oYnJvd3NlciwgUmVnRXhwLiQxKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRzZXRWZXJzaW9uKGJyb3dzZXIsICh0ZXN0KC90cmlkZW50XFwvNFxcLjAvKSA/IFwiOFwiIDogUmVnRXhwLiQxKSk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAoaXMoXCJmaXJlZm94XCIpKSB7XG5cdFx0XHRcdGJyb3dzZXIuZW5naW5lID0gXCJnZWNrb1wiO1xuXHRcdFx0XHRicm93c2VyLm5hbWUgPSBcImZpcmVmb3hcIjtcblx0XHRcdFx0c2V0VmVyc2lvbihicm93c2VyLCAodGVzdCgvZmlyZWZveFxcLyhbXFxkXFx3XFwuXSspLykgPyBSZWdFeHAuJDEgOiBcIlwiKSk7XG5cdFx0XHR9IGVsc2UgaWYgKGlzKFwiZ2Vja28vXCIpKSB7XG5cdFx0XHRcdGJyb3dzZXIuZW5naW5lID0gXCJnZWNrb1wiO1xuXHRcdFx0fSBlbHNlIGlmIChpcyhcIm9wZXJhXCIpKSB7XG5cdFx0XHRcdGJyb3dzZXIubmFtZSA9IFwib3BlcmFcIjtcblx0XHRcdFx0YnJvd3Nlci5lbmdpbmUgPSBcInByZXN0b1wiO1xuXHRcdFx0XHRzZXRWZXJzaW9uKGJyb3dzZXIsICh0ZXN0KC92ZXJzaW9uXFwvKFtcXGRcXC5dKykvKSA/IFJlZ0V4cC4kMSA6ICh0ZXN0KC9vcGVyYShcXHN8XFwvKShbXFxkXFwuXSspLykgPyBSZWdFeHAuJDIgOiBcIlwiKSkpO1xuXHRcdFx0fSBlbHNlIGlmIChpcyhcImtvbnF1ZXJvclwiKSkge1xuXHRcdFx0XHRicm93c2VyLm5hbWUgPSBcImtvbnF1ZXJvclwiO1xuXHRcdFx0fSBlbHNlIGlmIChpcyhcImNocm9tZVwiKSkge1xuXHRcdFx0XHRicm93c2VyLmVuZ2luZSA9IFwid2Via2l0XCI7XG5cdFx0XHRcdGJyb3dzZXIubmFtZSA9IFwiY2hyb21lXCI7XG5cdFx0XHRcdHNldFZlcnNpb24oYnJvd3NlciwgKHRlc3QoL2Nocm9tZVxcLyhbXFxkXFwuXSspLykgPyBSZWdFeHAuJDEgOiBcIlwiKSk7XG5cdFx0XHR9IGVsc2UgaWYgKGlzKFwiaXJvblwiKSkge1xuXHRcdFx0XHRicm93c2VyLmVuZ2luZSA9IFwid2Via2l0XCI7XG5cdFx0XHRcdGJyb3dzZXIubmFtZSA9IFwiaXJvblwiO1xuXHRcdFx0fSBlbHNlIGlmIChpcyhcImNyaW9zXCIpKSB7XG5cdFx0XHRcdGJyb3dzZXIubmFtZSA9IFwiY2hyb21lXCI7XG5cdFx0XHRcdGJyb3dzZXIuZW5naW5lID0gXCJ3ZWJraXRcIjtcblx0XHRcdFx0c2V0VmVyc2lvbihicm93c2VyLCAodGVzdCgvY3Jpb3NcXC8oW1xcZFxcLl0rKS8pID8gUmVnRXhwLiQxIDogXCJcIikpO1xuXHRcdFx0fSBlbHNlIGlmIChpcyhcImFwcGxld2Via2l0L1wiKSkge1xuXHRcdFx0XHRicm93c2VyLm5hbWUgPSBcInNhZmFyaVwiO1xuXHRcdFx0XHRicm93c2VyLmVuZ2luZSA9IFwid2Via2l0XCI7XG5cdFx0XHRcdHNldFZlcnNpb24oYnJvd3NlciwgKHRlc3QoL3ZlcnNpb25cXC8oW1xcZFxcLl0rKS8pID8gUmVnRXhwLiQxIDogXCJcIikpO1xuXHRcdFx0fSBlbHNlIGlmIChpcyhcIm1vemlsbGEvXCIpKSB7XG5cdFx0XHRcdGJyb3dzZXIuZW5naW5lID0gXCJnZWNrb1wiO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCEhYnJvd3Nlci5uYW1lKSB7XG5cdFx0XHRcdGFkZENvbmRpdGlvbmFsVGVzdChicm93c2VyLm5hbWUsIHRydWUpO1xuXHRcdFx0XHRpZiAoISFicm93c2VyLm1ham9yKSB7XG5cdFx0XHRcdFx0YWRkVmVyc2lvblRlc3QoYnJvd3Nlci5uYW1lLCBicm93c2VyLm1ham9yKTtcblx0XHRcdFx0XHRpZiAoISFicm93c2VyLm1pbm9yKSB7XG5cdFx0XHRcdFx0XHRhZGRWZXJzaW9uVGVzdChicm93c2VyLm5hbWUsIGJyb3dzZXIubWFqb3IsIGJyb3dzZXIubWlub3IpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0YWRkQ29uZGl0aW9uYWxUZXN0KGJyb3dzZXIuZW5naW5lLCB0cnVlKTtcblxuXHRcdFx0Ly8gQnJvd3NlciBMYW5ndWFnZVxuXHRcdFx0YnJvd3Nlci5sYW5ndWFnZSA9IG5hdmlnYXRvci51c2VyTGFuZ3VhZ2UgfHwgbmF2aWdhdG9yLmxhbmd1YWdlO1xuXHRcdFx0YWRkQ29uZGl0aW9uYWxUZXN0KGJyb3dzZXIubGFuZ3VhZ2UsIHRydWUpO1xuXHRcdH1cblxuXHRcdC8qKiBQbHVnaW4gZGV0ZWN0aW9uICoqL1xuXHRcdGlmIChvcHRpb25zLmRldGVjdFBsdWdpbnMpIHtcblx0XHRcdGJyb3dzZXIucGx1Z2lucyA9IFtdO1xuXHRcdFx0Zm9yIChpID0gcGx1Z2luczJkZXRlY3QubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcblx0XHRcdFx0cGx1Z2luMmRldGVjdCA9IHBsdWdpbnMyZGV0ZWN0W2ldO1xuXHRcdFx0XHRwbHVnaW5Gb3VuZCA9IGZhbHNlO1xuXHRcdFx0XHRpZiAod2luZG93LkFjdGl2ZVhPYmplY3QpIHtcblx0XHRcdFx0XHRwbHVnaW5Gb3VuZCA9IGRldGVjdE9iamVjdChwbHVnaW4yZGV0ZWN0LnByb2dJZHMpO1xuXHRcdFx0XHR9IGVsc2UgaWYgKG5hdmlnYXRvci5wbHVnaW5zKSB7XG5cdFx0XHRcdFx0cGx1Z2luRm91bmQgPSBkZXRlY3RQbHVnaW4ocGx1Z2luMmRldGVjdC5zdWJzdHJzKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAocGx1Z2luRm91bmQpIHtcblx0XHRcdFx0XHRicm93c2VyLnBsdWdpbnMucHVzaChwbHVnaW4yZGV0ZWN0Lm5hbWUpO1xuXHRcdFx0XHRcdGFkZENvbmRpdGlvbmFsVGVzdChwbHVnaW4yZGV0ZWN0Lm5hbWUsIHRydWUpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRpZiAobmF2aWdhdG9yLmphdmFFbmFibGVkKCkpIHtcblx0XHRcdFx0YnJvd3Nlci5wbHVnaW5zLnB1c2goXCJqYXZhXCIpO1xuXHRcdFx0XHRhZGRDb25kaXRpb25hbFRlc3QoXCJqYXZhXCIsIHRydWUpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXHREZXRlY3RpenIuZGV0ZWN0ID0gZnVuY3Rpb24oc2V0dGluZ3MpIHtcblx0XHRyZXR1cm4gZGV0ZWN0KHNldHRpbmdzKTtcblx0fTtcblx0RGV0ZWN0aXpyLmluaXQgPSBmdW5jdGlvbigpIHtcblx0XHRpZiAoRGV0ZWN0aXpyICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdERldGVjdGl6ci5icm93c2VyID0ge1xuXHRcdFx0XHR1c2VyQWdlbnQ6IChuYXZpZ2F0b3IudXNlckFnZW50IHx8IG5hdmlnYXRvci52ZW5kb3IgfHwgd2luZG93Lm9wZXJhKS50b0xvd2VyQ2FzZSgpXG5cdFx0XHR9O1xuXHRcdFx0RGV0ZWN0aXpyLmRldGVjdCgpO1xuXHRcdH1cblx0fTtcblx0RGV0ZWN0aXpyLmluaXQoKTtcblxuXHRyZXR1cm4gRGV0ZWN0aXpyO1xufSh3aW5kb3csIHdpbmRvdy5uYXZpZ2F0b3IsIHdpbmRvdy5kb2N1bWVudCkpO1xuIl19
